ACTOR DRPGMarineDoubleShotgunDRLASummoned
{
  Health 100
  GibHealth -50
  Radius 20
  Height 56
  Speed 10
  PainChance 256
  DamageFactor "Crush", 10
  Monster
  +FLOORCLIP
  +AVOIDMELEE
  +MISSILEMORE
  -COUNTKILL
  +AMBUSH
  +NEVERRESPAWN
  +QUICKTORETALIATE
  +NOBLOCKMONST
  +NOINFIGHTING
  +DONTHARMSPECIES
  +FRIENDLY
  -SOLID
  +ALWAYSFAST
  +QUICKTORETALIATE
  +MISSILEMORE
  Obituary "%o stood in the line of fire for some reason."
  Species "Player"
  Tag "Marine"
  SeeSound "drpgmarinemale1/sight"
  PainSound "drpgmarinemale1/pain"
  DeathSound "drpgmarinemale1/death"
  ActiveSound "drpgmarinemale/active"
  AttackSound ""
  States
  {
  Spawn:
    TNT1 A 0 NoDelay ACS_NamedExecuteAlways("MonsterInit", 0, MF_NOPAYKILL | MF_NODROPS | MF_NAMEGEN)
	Goto SpawnSearch
  SpawnSearch:
    NMA5 A 3 A_Wander
    TNT1 A 0 A_Look
    NMA5 A 3 A_Wander
    TNT1 A 0 A_Look
    NMA5 B 3 A_Wander
    TNT1 A 0 A_Look
    NMA5 B 3 A_Wander
    TNT1 A 0 A_Look
    NMA5 C 3 A_Wander
    TNT1 A 0 A_Look
    NMA5 C 3 A_Wander
    TNT1 A 0 A_Look
    NMA5 D 3 A_Wander
    TNT1 A 0 A_Look
    NMA5 D 3 A_Wander
    TNT1 A 0 A_Look
    Loop
  See:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineShotgunShotCounter", 1, "RetreatReload")
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_JumpIfHealthLower (30, "SeeScared")
    NMA5 AABBCCDD 3 A_Chase
    Loop
  SeeScared:
    TNT1 A 0 A_JumpIfHealthLower (30, 1)
	Goto See
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 1)
    NMA5 AABBCCDD 2 A_Chase
    TNT1 A 0 A_JumpIfCloser (1024, 1)
	Goto Overwatch
    NMA5 A 2 A_Chase
    TNT1 A 0 A_JumpIfCloser (1024, 1)
	Goto Overwatch
    NMA5 B 2 A_Chase
    TNT1 A 0 A_JumpIfCloser (1024, 1)
	Goto Overwatch
    NMA5 B 2 A_Chase
    TNT1 A 0 A_JumpIfCloser (1024, 1)
	Goto Overwatch
    NMA5 C 2 A_Chase
    TNT1 A 0 A_JumpIfCloser (1024, 1)
	Goto Overwatch
    NMA5 C 2 A_Chase
    TNT1 A 0 A_JumpIfCloser (1024, 1)
	Goto Overwatch
    NMA5 D 2 A_Chase
    TNT1 A 0 A_JumpIfCloser (1024, 1)
	Goto Overwatch
    NMA5 D 2 A_Chase
    TNT1 A 0 A_JumpIfCloser (1024, "SeeScared")
	Goto Overwatch
  RetreatReload:
    NMA5 AABBCCDD 3 A_Chase ("", "Reload")
    Goto RetreatReload
  Missile:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineShotgunShotCounter", 1, "RetreatReload")
    NMA5 EEEEEEEEEEEE 1 A_FaceTarget (10)
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 A_MonsterRefire (0, "Overwatch")
    TNT1 A 0 A_GiveInventory ("DRPGMarineShotgunShotCounter", 1)
    TNT1 A 0 A_PlaySound("drpgmarines/doubleshotgun", CHAN_WEAPON, 1, 0, 0.5)
    NMA5 F 4 Bright A_CustomBulletAttack (30, 5, 10, random(1,5) * 3, "DRPGMarineBulletPuff", 0, CBAF_NORANDOM)
    NMA5 E 6
    TNT1 A 0 A_JumpIfHealthLower (30, 2)
    TNT1 A 0 A_Jump (64, "RetreatReload")
    TNT1 A 0
    Goto Reload
  Overwatch:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineShotgunShotCounter", 1, "Reload")
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    NMA5 E 4 A_FaceTarget
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    NMA5 E 4 A_FaceTarget
    TNT1 A 0 A_JumpIfHealthLower (30, 2)
    TNT1 A 0 A_Jump (140, 2)
    TNT1 A 0
    Loop
    TNT1 A 0
    Goto See
  Reload:
    NMA5 EE 7
    TNT1 A 0 A_PlaySound("drpgmarines/doubleshotgunopen", 7)
    NMA5 E 21
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_TakeInventory ("DRPGMarineShotgunShotCounter", 1)
    TNT1 A 0 A_PlaySound("drpgmarines/doubleshotgunload", 7)
    NMA5 E 18
    TNT1 A 0 A_PlaySound("drpgmarines/doubleshotgunclose", 7)
    NMA5 E 5 A_FaceTarget
    Goto See
  Pain:
    NMA5 G 3
    NMA5 G 3 A_Pain
    Goto See
  Death:
    NMA5 H 4
    NMA5 I 4 A_Scream
    NMA5 J 4 A_NoBlocking
    NMA5 K 4
    TNT1 A 0 A_SpawnItem ("DRPGBodyThud", 0, 0, 0, 0)
    NMA5 LM 4
    NMA5 N -1
    Stop
  XDeath:
    NMA5 O 4
    NMA5 P 4 A_XScream
    NMA5 Q 4 A_NoBlocking
    TNT1 A 0 A_SpawnItem ("DRPGGibThud", 0, 0, 0, 0)
    NMA5 RSTUV 4
    NMA5 W -1
    Stop
  Crush:
    TNT1 A 1 A_SpawnItem("DRPGCrushedMarine",0,0,0,0)
    Stop
  }
}

ACTOR DRPGMarineBattleRifleDRLASummoned
{
  Health 100
  GibHealth -50
  Radius 20
  Height 56
  Speed 8
  PainChance 256
  DamageFactor "Crush", 10
  Monster
  +FLOORCLIP
  +AVOIDMELEE
  +MISSILEMORE
  -COUNTKILL
  +AMBUSH
  +NEVERRESPAWN
  +QUICKTORETALIATE
  +NOBLOCKMONST
  +NOINFIGHTING
  +DONTHARMSPECIES
  +FRIENDLY
  -SOLID
  +ALWAYSFAST
  +QUICKTORETALIATE
  +MISSILEMORE
  Obituary "%o stood in the line of fire for some reason."
  Species "Player"
  Tag "Marine"
  SeeSound "drpgmarinemale2/sight"
  PainSound "drpgmarinemale2/pain"
  DeathSound "drpgmarinemale2/death"
  ActiveSound "drpgmarinemale/active"
  AttackSound ""
  States
  {
  Spawn:
    TNT1 A 0 NoDelay ACS_NamedExecuteAlways("MonsterInit", 0, MF_NOPAYKILL | MF_NODROPS | MF_NAMEGEN)
	Goto SpawnSearch
  SpawnSearch:
    NMA1 A 3 A_Wander
    TNT1 A 0 A_Look
    NMA1 A 3 A_Wander
    TNT1 A 0 A_Look
    NMA1 B 3 A_Wander
    TNT1 A 0 A_Look
    NMA1 B 3 A_Wander
    TNT1 A 0 A_Look
    NMA1 C 3 A_Wander
    TNT1 A 0 A_Look
    NMA1 C 3 A_Wander
    TNT1 A 0 A_Look
    NMA1 D 3 A_Wander
    TNT1 A 0 A_Look
    NMA1 D 3 A_Wander
    TNT1 A 0 A_Look
    Loop
  See:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineBattleRifleShotCounter", 20, "RetreatReload")
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_JumpIfHealthLower (30, "SeeScared")
    NMA1 AABBCCDD 3 A_Chase
    Loop
  SeeScared:
    TNT1 A 0 A_JumpIfHealthLower (30, 1)
	Goto See
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 1)
    NMA1 AABBCCDD 2 A_Chase
    TNT1 A 0 A_JumpIfCloser (1024, 1)
	Goto Overwatch
    NMA1 A 2 A_Chase
    TNT1 A 0 A_JumpIfCloser (1024, 1)
	Goto Overwatch
    NMA1 B 2 A_Chase
    TNT1 A 0 A_JumpIfCloser (1024, 1)
	Goto Overwatch
    NMA1 B 2 A_Chase
    TNT1 A 0 A_JumpIfCloser (1024, 1)
	Goto Overwatch
    NMA1 C 2 A_Chase
    TNT1 A 0 A_JumpIfCloser (1024, 1)
	Goto Overwatch
    NMA1 C 2 A_Chase
    TNT1 A 0 A_JumpIfCloser (1024, 1)
	Goto Overwatch
    NMA1 D 2 A_Chase
    TNT1 A 0 A_JumpIfCloser (1024, 1)
	Goto Overwatch
    NMA1 D 2 A_Chase
    TNT1 A 0 A_JumpIfCloser (1024, "SeeScared")
	Goto Overwatch
  RetreatReload:
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 1)
    NMA1 AA 2 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (180, 2)
    TNT1 A 0 A_Jump (24, "Reload")
    NMA1 BB 2 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (180, 2)
    TNT1 A 0 A_Jump (24, "Reload")
    NMA1 CC 2 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (180, 2)
    TNT1 A 0 A_Jump (24, "Reload")
    NMA1 DD 2 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (180, 2)
    TNT1 A 0 A_Jump (24, "Reload")
    TNT1 A 0
    Goto RetreatReload+1
  Missile:
    TNT1 A 0 A_JumpIfCloser (220, 7)
    NMA1 EEEEEEEEEE 1 A_FaceTarget (10)
  MissileCheck:
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 A_JumpIfCloser (700, 1)
	Goto MissileSnipe
    TNT1 A 0 A_JumpIfCloser (220, 1)
	Goto MissileBurst
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineBattleRifleShotCounter", 20, "RetreatReload")
    TNT1 A 0 A_GiveInventory ("DRPGMarineBattleRifleShotCounter", 1)
    TNT1 A 0 A_PlaySound("drpgmarines/battlerifle", CHAN_WEAPON, 1, 0, 0.7)
    NMA1 F 3 Bright A_CustomBulletAttack (22.5, 0, 1, random(1,5) * 3, "DRPGMarineBulletPuff", 0, CBAF_NORANDOM)
    NMA1 E 1 A_MonsterRefire(80, "Overwatch")
    Goto MissileCheck
  MissileBurst:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineBattleRifleShotCounter", 20, "RetreatReload")
    TNT1 A 0 A_GiveInventory ("DRPGMarineBattleRifleShotCounter", 1)
    TNT1 A 0 A_PlaySound("drpgmarines/battlerifle", CHAN_WEAPON, 1, 0, 0.7)
    NMA1 F 3 Bright A_CustomBulletAttack (19, 0, 1, random(1,5) * 3, "DRPGMarineBulletPuff", 0, CBAF_NORANDOM)
    NMA1 E 1 A_FaceTarget
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineBattleRifleShotCounter", 20, "RetreatReload")
    TNT1 A 0 A_GiveInventory ("DRPGMarineBattleRifleShotCounter", 1)
    TNT1 A 0 A_PlaySound("drpgmarines/battlerifle", CHAN_WEAPON, 1, 0, 0.7)
    NMA1 F 3 Bright A_CustomBulletAttack (19, 0, 1, random(1,5) * 3, "DRPGMarineBulletPuff", 0, CBAF_NORANDOM)
    NMA1 E 1 A_FaceTarget
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineBattleRifleShotCounter", 20, "RetreatReload")
    TNT1 A 0 A_GiveInventory ("DRPGMarineBattleRifleShotCounter", 1)
    TNT1 A 0 A_PlaySound("drpgmarines/battlerifle", CHAN_WEAPON, 1, 0, 0.7)
    NMA1 F 3 Bright A_CustomBulletAttack (19, 0, 1, random(1,5) * 3, "DRPGMarineBulletPuff", 0, CBAF_NORANDOM)
    NMA1 E 1 A_FaceTarget
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineBattleRifleShotCounter", 20, "RetreatReload")
    TNT1 A 0 A_GiveInventory ("DRPGMarineBattleRifleShotCounter", 1)
    TNT1 A 0 A_PlaySound("drpgmarines/battlerifle", CHAN_WEAPON, 1, 0, 0.7)
    NMA1 F 3 Bright A_CustomBulletAttack (19, 0, 1, random(1,5) * 3, "DRPGMarineBulletPuff", 0, CBAF_NORANDOM)
    NMA1 E 1 A_FaceTarget
    NMA1 EEEEEEEEEE 1 A_FaceTarget (10)
    NMA1 E 1 A_MonsterRefire(0, "Overwatch")
    Goto MissileCheck
  MissileSnipe:
    TNT1 A 0 A_Jump (256,1,10,15,20,25)
    NMA1 EEEEEEEEEEEEEEEEEEEEEEEEEEEEEE 1 A_FaceTarget (10)
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineBattleRifleShotCounter", 20, "RetreatReload")
    TNT1 A 0 A_GiveInventory ("DRPGMarineBattleRifleShotCounter", 1)
    TNT1 A 0 A_PlaySound("drpgmarines/battlerifle", CHAN_WEAPON, 1, 0, 0.7)
    NMA1 F 3 Bright A_CustomBulletAttack (16, 0, 1, random(1,5) * 3, "DRPGMarineBulletPuff", 0, CBAF_NORANDOM)
    NMA1 E 1 A_MonsterRefire(0, "Overwatch")
    Goto MissileCheck
  Reload:
    NMA1 EE 4
    TNT1 A 0 A_PlaySound("drpgmarines/battlerifleunload", 7)
    NMA1 EEEEEEEE 4
    NMA1 E 2
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_PlaySound("drpgmarines/battlerifleload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineBattleRifleShotCounter", 20)
    NMA1 EE 5
    TNT1 A 0 A_PlaySound("drpgmarines/battleriflecock", 5)
    NMA1 EEEEEE 1 A_FaceTarget (10)
    Goto See
  Overwatch:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineBattleRifleShotCounter", 20, "Reload")
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    NMA1 E 5 A_FaceTarget (10)
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    NMA1 E 5 A_FaceTarget (10)
    TNT1 A 0 A_Jump (200, 1)
    Goto Overwatch
    TNT1 A 0
    Goto See
  Pain:
    NMA1 G 3
    NMA1 G 3 A_Pain
    Goto See
  Death:
    NMA1 H 4
    NMA1 I 4 A_Scream
    NMA1 J 4 A_NoBlocking
    NMA1 K 4
    TNT1 A 0 A_SpawnItem ("DRPGBodyThud", 0, 0, 0, 0)
    NMA1 LM 4
    NMA1 N -1
    Stop
  XDeath:
    NMA1 O 4
    NMA1 P 4 A_XScream
    NMA1 Q 4 A_NoBlocking
    TNT1 A 0 A_SpawnItem ("DRPGGibThud", 0, 0, 0, 0)
    NMA1 RSTUV 4
    NMA1 W -1
    Stop
  Crush:
    TNT1 A 1 A_SpawnItem("DRPGCrushedMarine",0,0,0,0)
    Stop
  }
}

/////Reindorced///////

ACTOR DRPGMarineGuardPistolSummoned2
{
  Health 125
  GibHealth -50
  Radius 20
  Height 56
  Speed 8
  PainChance 192
  DamageFactor "Crush", 10
  Monster
  +FLOORCLIP
  +AVOIDMELEE
  +FRIENDLY
  -COUNTKILL
  +AMBUSH
  +NEVERRESPAWN
  +QUICKTORETALIATE
  +NOBLOCKMONST
  +NOINFIGHTING
  +DONTHARMSPECIES
  +FRIENDLY
  -SOLID
  +ALWAYSFAST
  +QUICKTORETALIATE
  +MISSILEMORE
  +MISSILEEVENMORE
  +LOOKALLAROUND
  Obituary "%o stood in the line of fire for some reason."
  Species "Player"
  Tag "Marine"
  SeeSound ""
  PainSound "drpgmarinemale2/pain"
  DeathSound "drpgmarinemale2/death"
  ActiveSound "drpgmarinemale/active"
  AttackSound ""
  States
  {
  Spawn:
    TNT1 A 0 NoDelay ACS_NamedExecuteAlways("MonsterInit", 0, MF_NOPAYKILL | MF_NODROPS | MF_NAMEGEN | MF_RANKLOSS)
    TNT1 A 0 A_GiveInventory ("DRPGMarineSummonedToken", 1)
    PPS2 A 0 A_Look
    Goto FollowPlayer
  See:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatPistolShotCounter", 12, "RetreatReload")
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_JumpIfHealthLower (30, "SeeScared")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    TNT1 A 0 A_CheckSight("FollowPlayer")
    PPS2 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    Goto See
  FollowPlayer:
    PPS2 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfTargetInLOS("See")
    TNT1 A 0 A_CheckSight("CheckIfPlayerSee")
    Goto FollowPlayer
  CheckIfPlayerSee:
    TNT1 A 0
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 1)
    PPS2 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_FastChase
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    TNT1 A 0 A_JumpIfCloser(1000, 2)
    TNT1 AAA 0
    Goto FollowPlayer
  Waits:
    TNT1 A 0 A_JumpIf(GetDistance(AAPTR_TARGET) > 200, "FollowPlayer")
    PPS2 E 1
    TNT1 A 0 A_ClearTarget
    TNT1 A 0 A_Jump(32, "Waits2")
    TNT1 A 0 A_Jump(32, "Waits3")
    TNT1 A 0 A_Jump(32, "See")
    PPS2 EEE 4 A_Stop
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PPS2 EEE 4 A_Stop
    TNT1 AAA 0 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PPS2 E 0 A_Look
    PPS2 E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits2:
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PPS2 EEE 6 A_Stop
    PPS2 EEE 6 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PPS2 A 0 A_Look
    PPS2 E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits3:
    TNT1 A 0
    TNT1 AAA 0
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PPS2 EEE 4 A_Stop
    PPS2 EEE 4 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PPS2 A 0 A_Look
    PPS2 E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  SeeScared:
    TNT1 A 0 A_JumpIfHealthLower (30, 1)
    Goto See
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 1)
    PPS2 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PPS2 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PPS2 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PPS2 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PPS2 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PPS2 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PPS2 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PPS2 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, "SeeScared")
    Goto Overwatch
  RetreatReload:
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 1)
    TNT1 A 0 A_JumpIf(GetDistance(AAPTR_TARGET) > 64, "TacticReload")
    PPS2 E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PPS2 AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (128, 2)
    TNT1 A 0 A_Jump (32, "Reload")
    PPS2 E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PPS2 AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (96, 2)
    TNT1 A 0 A_Jump (64, "Reload")
    PPS2 E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PPS2 AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (64, 2)
    TNT1 A 0 A_Jump (96, "Reload")
    PPS2 E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PPS2 AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (32, 2)
    TNT1 A 0 A_Jump (128, "Reload")
    TNT1 A 0
    Goto RetreatReload+1
  Missile:
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    TNT1 A 0 A_Jump (32, "TacticStrafe")
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatPistolShotCounter", 12, "RetreatReload")
    PPS2 EEEEEE 1 A_FaceTarget (10)
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 A_GiveInventory ("DRPGMarineCombatPistolShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/highpowercombatpistol", CHAN_WEAPON, 1, 0, 0.8)
    PPS2 F 4 Bright A_CustomBulletAttack (6, 0, 1, random(2,6) * 3, "DRPGMarineBulletPuffSummoned", 0, CBAF_NORANDOM)
    PPS2 E 5
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatPistolShotCounter", 12, "RetreatReload")
    PPS2 E 1 A_MonsterRefire (0, "Overwatch")
    Goto Missile
  Reload:
    PPS2 EE 4
    TNT1 A 0 A_PlaySound("weapons/hpcombatpistolunload", 7)
    PPS2 EE 4
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_PlaySound("weapons/hpcombatpistolload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatPistolShotCounter", 12)
    PPS2 EEEE 4
    PPS2 E 3
    TNT1 A 0 A_PlaySound("weapons/hpcombatpistolcock", 7)
    PPS2 E 6
    Goto See+2
  TacticReload:
    TNT1 A 0 A_Jump(128, 3)
    PPS2 E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-random(3,8))
    PPS2 E 1 A_FaceTarget
    PPS2 EE 4
    TNT1 A 0 A_PlaySound("weapons/hpcombatpistolunload", 7)
    PPS2 EE 4
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_PlaySound("weapons/hpcombatpistolload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatPistolShotCounter", 12)
    PPS2 EEEE 4
    PPS2 E 3
    TNT1 A 0 A_PlaySound("weapons/hpcombatpistolcock", 7)
    PPS2 E 6
    Goto See+2
  TacticStrafe:
    TNT1 A 0 A_Jump(64, "TacticStrafeLeft1")
    TNT1 A 0 A_Jump(64, "TacticStrafeRight1")
    TNT1 A 0 A_Jump(32, "TacticStrafeLeft2")
    TNT1 A 0 A_Jump(32, "TacticStrafeRight2")
    TNT1 A 0 A_Jump(128, "TacticStrafeBack1")
    Goto TacticStrafeBack2
  TacticStrafeLeft1:
    TNT1 A 0 A_SetAngle(90 + angle)
    PPS2 AABBCCDD 1 A_Recoil(-1)
    PPS2 E 1 A_FaceTarget
    Goto Missile
  TacticStrafeLeft2:
    TNT1 A 0 A_SetAngle((90+random(-30,30)) + angle)
    PPS2 AABBCCDD 1 A_Recoil(-random(1,2))
    PPS2 E 1 A_FaceTarget
    Goto Missile
  TacticStrafeRight1:
    TNT1 A 0 A_SetAngle(270 + angle)
    PPS2 AABBCCDD 1 A_Recoil(-1)
    PPS2 E 1 A_FaceTarget
    Goto Missile
  TacticStrafeRight2:
    TNT1 A 0 A_SetAngle((270+random(-30,30)) + angle)
    PPS2 AABBCCDD 1 A_Recoil(-random(1,2))
    PPS2 E 1 A_FaceTarget
    Goto Missile
  TacticStrafeBack1:
    PPS2 E 1 A_FaceTarget
    PPS2 AABBCCDD 1 A_Recoil(-1)
    PPS2 E 1 A_FaceTarget
    Goto Missile
  TacticStrafeBack2:
    PPS2 E 1 A_FaceTarget
    PPS2 AABBCCDD 1 A_Recoil(-random(1,2))
    PPS2 E 1 A_FaceTarget
    Goto Missile
  TacticStrafeBack3:
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 ThrustThing(angle*256/360+128, 8, 0, 0)
    TNT1 A 0 ThrustThingZ(0, 4, 0, 1)
    Goto See
  Overwatch:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatPistolShotCounter", 12, "RetreatReload")
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    PPS2 E 4 A_FaceTarget
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    PPS2 E 4 A_FaceTarget
    TNT1 A 0 A_Jump (200, 1)
    Goto Overwatch
    TNT1 A 0
    Goto See+2
  Pain:
    PPS2 G 3
    PPS2 G 3 A_Pain
    TNT1 A 0 A_JumpIfCloser (64, 1)
    Goto See
    TNT1 A 0 A_Jump(32, "TacticStrafe")
    TNT1 A 0 A_Jump(32, "TacticStrafeBack3")
    Goto See
  Death:
    PPS2 H 4
    PPS2 I 4 A_Scream
    PPS2 J 4 A_NoBlocking
    PPS2 K 4
    TNT1 A 0 A_SpawnItem ("DRPGBodyThud", 0, 0, 0, 0)
    PPS2 LM 4
    PPS2 N -1
    Stop
  XDeath:
    PPS2 O 4
    PPS2 P 4 A_XScream
    PPS2 Q 4 A_NoBlocking
    TNT1 A 0 A_SpawnItem ("DRPGGibThud", 0, 0, 0, 0)
    PPS2 RSTUV 4
    PPS2 W -1
    Stop
  Crush:
    TNT1 A 1 A_SpawnItem("DRPGCrushedMarine",0,0,0,0)
    Stop
  }
}

ACTOR DRPGMarineGuardPistolSummoned3
{
  Health 150
  GibHealth -50
  Radius 20
  Height 56
  Speed 8
  PainChance 160
  DamageFactor "Crush", 10
  Monster
  +FLOORCLIP
  +AVOIDMELEE
  +FRIENDLY
  -COUNTKILL
  +AMBUSH
  +NEVERRESPAWN
  +QUICKTORETALIATE
  +NOBLOCKMONST
  +NOINFIGHTING
  +DONTHARMSPECIES
  +FRIENDLY
  -SOLID
  +ALWAYSFAST
  +QUICKTORETALIATE
  +MISSILEMORE
  +MISSILEEVENMORE
  +LOOKALLAROUND
  Obituary "%o stood in the line of fire for some reason."
  Species "Player"
  Tag "Marine"
  SeeSound ""
  PainSound "drpgmarinemale2/pain"
  DeathSound "drpgmarinemale2/death"
  ActiveSound "drpgmarinemale/active"
  AttackSound ""
  States
  {
  Spawn:
    TNT1 A 0 NoDelay ACS_NamedExecuteAlways("MonsterInit", 0, MF_NOPAYKILL | MF_NODROPS | MF_NAMEGEN | MF_RANKLOSS)
    TNT1 A 0 A_GiveInventory ("DRPGMarineSummonedToken", 1)
    PL22 A 0 A_Look
    Goto FollowPlayer
  See:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatPistolShotCounter", 12, "RetreatReload")
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_JumpIfHealthLower (30, "SeeScared")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    TNT1 A 0 A_CheckSight("FollowPlayer")
    PL22 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    Goto See
  FollowPlayer:
    PL22 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfTargetInLOS("See")
    TNT1 A 0 A_CheckSight("CheckIfPlayerSee")
    Goto FollowPlayer
  CheckIfPlayerSee:
    TNT1 A 0
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 1)
    PL22 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_FastChase
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    TNT1 A 0 A_JumpIfCloser(1000, 2)
    TNT1 AAA 0
    Goto FollowPlayer
  Waits:
    TNT1 A 0 A_JumpIf(GetDistance(AAPTR_TARGET) > 200, "FollowPlayer")
    PL22 E 1
    TNT1 A 0 A_ClearTarget
    TNT1 A 0 A_Jump(32, "Waits2")
    TNT1 A 0 A_Jump(32, "Waits3")
    TNT1 A 0 A_Jump(32, "See")
    PL22 EEE 4 A_Stop
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PL22 EEE 4 A_Stop
    TNT1 AAA 0 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PL22 E 0 A_Look
    PL22 E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits2:
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PL22 EEE 6 A_Stop
    PL22 EEE 6 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PL22 A 0 A_Look
    PL22 E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits3:
    TNT1 A 0
    TNT1 AAA 0
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PL22 EEE 4 A_Stop
    PL22 EEE 4 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PL22 A 0 A_Look
    PL22 E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  SeeScared:
    TNT1 A 0 A_JumpIfHealthLower (30, 1)
    Goto See
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 1)
    PL22 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PL22 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PL22 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PL22 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PL22 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PL22 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PL22 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PL22 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, "SeeScared")
    Goto Overwatch
  RetreatReload:
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 1)
    TNT1 A 0 A_JumpIf(GetDistance(AAPTR_TARGET) > 64, "TacticReload")
    PL22 E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PL22 AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (128, 2)
    TNT1 A 0 A_Jump (32, "Reload")
    PL22 E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PL22 AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (96, 2)
    TNT1 A 0 A_Jump (64, "Reload")
    PL22 E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PL22 AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (64, 2)
    TNT1 A 0 A_Jump (96, "Reload")
    PL22 E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PL22 AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (32, 2)
    TNT1 A 0 A_Jump (128, "Reload")
    TNT1 A 0
    Goto RetreatReload+1
  Missile:
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    TNT1 A 0 A_Jump (32, "TacticStrafe")
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatPistolShotCounter", 12, "RetreatReload")
    PL22 EEEEEE 1 A_FaceTarget (10)
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 A_GiveInventory ("DRPGMarineCombatPistolShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/highpowercombatpistol", CHAN_WEAPON, 1, 0, 0.8)
    PL22 F 4 Bright A_CustomBulletAttack (10, 0, 2, random(2,6) * 3, "DRPGMarineBulletPuffSummoned", 0, CBAF_NORANDOM)
    PL22 E 5
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatPistolShotCounter", 12, "RetreatReload")
    PL22 E 1 A_MonsterRefire (0, "Overwatch")
    Goto Missile
  Reload:
    PL22 EE 4
    TNT1 A 0 A_PlaySound("weapons/hpcombatpistolunload", 7)
    PL22 EE 4
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_PlaySound("weapons/hpcombatpistolload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatPistolShotCounter", 12)
    PL22 EEEE 4
    PL22 E 3
    TNT1 A 0 A_PlaySound("weapons/hpcombatpistolcock", 7)
    PL22 E 6
    Goto See+2
  TacticReload:
    TNT1 A 0 A_Jump(128, 3)
    PL22 E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-random(3,8))
    PL22 E 1 A_FaceTarget
    PL22 EE 4
    TNT1 A 0 A_PlaySound("weapons/hpcombatpistolunload", 7)
    PL22 EE 4
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_PlaySound("weapons/hpcombatpistolload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatPistolShotCounter", 12)
    PL22 EEEE 4
    PL22 E 3
    TNT1 A 0 A_PlaySound("weapons/hpcombatpistolcock", 7)
    PL22 E 6
    Goto See+2
  TacticStrafe:
    TNT1 A 0 A_Jump(64, "TacticStrafeLeft1")
    TNT1 A 0 A_Jump(64, "TacticStrafeRight1")
    TNT1 A 0 A_Jump(32, "TacticStrafeLeft2")
    TNT1 A 0 A_Jump(32, "TacticStrafeRight2")
    TNT1 A 0 A_Jump(128, "TacticStrafeBack1")
    Goto TacticStrafeBack2
  TacticStrafeLeft1:
    TNT1 A 0 A_SetAngle(90 + angle)
    PL22 AABBCCDD 1 A_Recoil(-1)
    PL22 E 1 A_FaceTarget
    Goto Missile
  TacticStrafeLeft2:
    TNT1 A 0 A_SetAngle((90+random(-30,30)) + angle)
    PL22 AABBCCDD 1 A_Recoil(-random(1,2))
    PL22 E 1 A_FaceTarget
    Goto Missile
  TacticStrafeRight1:
    TNT1 A 0 A_SetAngle(270 + angle)
    PL22 AABBCCDD 1 A_Recoil(-1)
    PL22 E 1 A_FaceTarget
    Goto Missile
  TacticStrafeRight2:
    TNT1 A 0 A_SetAngle((270+random(-30,30)) + angle)
    PL22 AABBCCDD 1 A_Recoil(-random(1,2))
    PL22 E 1 A_FaceTarget
    Goto Missile
  TacticStrafeBack1:
    PL22 E 1 A_FaceTarget
    PL22 AABBCCDD 1 A_Recoil(-1)
    PL22 E 1 A_FaceTarget
    Goto Missile
  TacticStrafeBack2:
    PL22 E 1 A_FaceTarget
    PL22 AABBCCDD 1 A_Recoil(-random(1,2))
    PL22 E 1 A_FaceTarget
    Goto Missile
  TacticStrafeBack3:
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 ThrustThing(angle*256/360+128, 8, 0, 0)
    TNT1 A 0 ThrustThingZ(0, 4, 0, 1)
    Goto See
  Overwatch:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatPistolShotCounter", 12, "RetreatReload")
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    PL22 E 4 A_FaceTarget
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    PL22 E 4 A_FaceTarget
    TNT1 A 0 A_Jump (200, 1)
    Goto Overwatch
    TNT1 A 0
    Goto See+2
  Pain:
    PL22 G 3
    PL22 G 3 A_Pain
    TNT1 A 0 A_JumpIfCloser (64, 1)
    Goto See
    TNT1 A 0 A_Jump(32, "TacticStrafe")
    TNT1 A 0 A_Jump(32, "TacticStrafeBack3")
    Goto See
  Death:
    PL22 H 4
    PL22 I 4 A_Scream
    PL22 J 4 A_NoBlocking
    PL22 K 4
    TNT1 A 0 A_SpawnItem ("DRPGBodyThud", 0, 0, 0, 0)
    PL22 LM 4
    PL22 N -1
    Stop
  XDeath:
    PL22 O 4
    PL22 P 4 A_XScream
    PL22 Q 4 A_NoBlocking
    TNT1 A 0 A_SpawnItem ("DRPGGibThud", 0, 0, 0, 0)
    PL22 RSTUV 4
    PL22 W -1
    Stop
  Crush:
    TNT1 A 1 A_SpawnItem("DRPGCrushedMarine",0,0,0,0)
    Stop
  }
}

ACTOR DRPGMarineBattleRifleSummoned2
{
  Health 150
  GibHealth -50
  Radius 20
  Height 56
  Speed 8
  PainChance 192
  DamageFactor "Crush", 10
  Monster
  +FLOORCLIP
  +AVOIDMELEE
  -COUNTKILL
  +AMBUSH
  +NEVERRESPAWN
  +QUICKTORETALIATE
  +NOBLOCKMONST
  +NOINFIGHTING
  +DONTHARMSPECIES
  +FRIENDLY
  -SOLID
  +ALWAYSFAST
  +QUICKTORETALIATE
  +MISSILEMORE
  +MISSILEEVENMORE
  +LOOKALLAROUND
  Obituary "%o stood in the line of fire for some reason."
  Species "Player"
  Tag "Marine"
  SeeSound "drpgmarinemale2/sight"
  PainSound "drpgmarinemale2/pain"
  DeathSound "drpgmarinemale2/death"
  ActiveSound "drpgmarinemale/active"
  AttackSound ""
  States
  {
  Spawn:
    TNT1 A 0 NoDelay ACS_NamedExecuteAlways("MonsterInit", 0, MF_NOPAYKILL | MF_NODROPS | MF_NAMEGEN)
    TNT1 A 0 A_GiveInventory ("DRPGMarineSummonedToken", 1)
    PCBN A 0 A_Look
    Goto FollowPlayer
  See:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineBattleRifleMk2ShotCounter", 30, "RetreatReload")
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_JumpIfHealthLower (30, "SeeScared")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    TNT1 A 0 A_CheckSight("FollowPlayer")
    PCBN AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    Goto See
  FollowPlayer:
    PCBN AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfTargetInLOS("See")
    TNT1 A 0 A_CheckSight("CheckIfPlayerSee")
    Goto FollowPlayer
  CheckIfPlayerSee:
    TNT1 A 0
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 1)
    PCBN AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_FastChase
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    TNT1 A 0 A_JumpIfCloser(1000, 2)
    TNT1 AAA 0
    Goto FollowPlayer
  Waits:
    TNT1 A 0 A_JumpIf(GetDistance(AAPTR_TARGET) > 200, "FollowPlayer")
    PCBN E 1
    TNT1 A 0 A_ClearTarget
    TNT1 A 0 A_Jump(32, "Waits2")
    TNT1 A 0 A_Jump(32, "Waits3")
    TNT1 A 0 A_Jump(32, "See")
    PCBN EEE 4 A_Stop
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PCBN EEE 4 A_Stop
    TNT1 AAA 0 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PCBN E 0 A_Look
    PCBN E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits2:
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PCBN EEE 6 A_Stop
    PCBN EEE 6 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PCBN A 0 A_Look
    PCBN E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits3:
    TNT1 A 0
    TNT1 AAA 0
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PCBN EEE 4 A_Stop
    PCBN EEE 4 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PCBN A 0 A_Look
    PCBN E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  SeeScared:
    TNT1 A 0 A_JumpIfHealthLower (30, 1)
    Goto See
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 1)
    PCBN AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PCBN AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PCBN AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PCBN AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PCBN AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PCBN AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PCBN AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PCBN AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, "SeeScared")
    Goto Overwatch
  RetreatReload:
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 1)
    TNT1 A 0 A_JumpIf(GetDistance(AAPTR_TARGET) > 64, "TacticReload")
    PCBN E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PCBN AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (128, 2)
    TNT1 A 0 A_Jump (32, "Reload")
    PCBN E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PCBN AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (96, 2)
    TNT1 A 0 A_Jump (64, "Reload")
    PCBN E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PCBN AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (64, 2)
    TNT1 A 0 A_Jump (96, "Reload")
    PCBN E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PCBN AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (32, 2)
    TNT1 A 0 A_Jump (128, "Reload")
    TNT1 A 0
    Goto RetreatReload+1
  Missile:
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    TNT1 A 0 A_JumpIfCloser (220, 7)
    PCBN EEEEEEEEEE 1 A_FaceTarget (10)
  MissileCheck:
    TNT1 A 0 A_Jump(64, "TacticStrafe")
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 A_JumpIfCloser (700, 1)
    Goto MissileSnipe
    TNT1 A 0 A_JumpIfCloser (220, 1)
    Goto MissileBurst
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineBattleRifleMk2ShotCounter", 30, "RetreatReload")
    TNT1 A 0 A_GiveInventory ("DRPGMarineBattleRifleMk2ShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/highpowerbattlerifle", CHAN_WEAPON, 1, 0, 0.7)
    PCBN F 3 Bright A_CustomBulletAttack (14, 0, 1, random(2,6) * 3, "DRPGMarineBulletPuffSummoned", 0, CBAF_NORANDOM)
    PCBN E 1 A_MonsterRefire(80, "Overwatch")
    Goto MissileCheck
  MissileBurst:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineBattleRifleMk2ShotCounter", 30, "RetreatReload")
    TNT1 A 0 A_GiveInventory ("DRPGMarineBattleRifleMk2ShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/highpowerbattlerifle", CHAN_WEAPON, 1, 0, 0.7)
    PCBN F 3 Bright A_CustomBulletAttack (14, 0, 1, random(2,6) * 3, "DRPGMarineBulletPuffSummoned", 0, CBAF_NORANDOM)
    PCBN E 1 A_FaceTarget
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineBattleRifleMk2ShotCounter", 30, "RetreatReload")
    TNT1 A 0 A_GiveInventory ("DRPGMarineBattleRifleMk2ShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/highpowerbattlerifle", CHAN_WEAPON, 1, 0, 0.7)
    PCBN F 3 Bright A_CustomBulletAttack (14, 0, 1, random(2,6) * 3, "DRPGMarineBulletPuffSummoned", 0, CBAF_NORANDOM)
    PCBN E 1 A_FaceTarget
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineBattleRifleMk2ShotCounter", 30, "RetreatReload")
    TNT1 A 0 A_GiveInventory ("DRPGMarineBattleRifleMk2ShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/highpowerbattlerifle", CHAN_WEAPON, 1, 0, 0.7)
    PCBN F 3 Bright A_CustomBulletAttack (14, 0, 1, random(2,6) * 3, "DRPGMarineBulletPuffSummoned", 0, CBAF_NORANDOM)
    PCBN E 1 A_FaceTarget
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineBattleRifleMk2ShotCounter", 30, "RetreatReload")
    TNT1 A 0 A_GiveInventory ("DRPGMarineBattleRifleMk2ShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/highpowerbattlerifle", CHAN_WEAPON, 1, 0, 0.7)
    PCBN F 3 Bright A_CustomBulletAttack (14, 0, 1, random(2,6) * 3, "DRPGMarineBulletPuffSummoned", 0, CBAF_NORANDOM)
    PCBN E 1 A_FaceTarget
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineBattleRifleMk2ShotCounter", 30, "RetreatReload")
    TNT1 A 0 A_GiveInventory ("DRPGMarineBattleRifleMk2ShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/highpowerbattlerifle", CHAN_WEAPON, 1, 0, 0.7)
    PCBN F 3 Bright A_CustomBulletAttack (14, 0, 1, random(2,6) * 3, "DRPGMarineBulletPuffSummoned", 0, CBAF_NORANDOM)
    PCBN E 1 A_FaceTarget
    PCBN EEEEEEEEEE 1 A_FaceTarget (10)
    PCBN E 1 A_MonsterRefire(0, "Overwatch")
    Goto MissileCheck
  MissileSnipe:
    TNT1 A 0 A_Jump (256,1,10,15,20,25)
    PCBN EEEEEEEEEEEEEEEEEEEEEEEEEEEEEE 1 A_FaceTarget (10)
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineBattleRifleMk2ShotCounter", 30, "RetreatReload")
    TNT1 A 0 A_GiveInventory ("DRPGMarineBattleRifleMk2ShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/highpowerbattlerifle", CHAN_WEAPON, 1, 0, 0.7)
    PCBN F 3 Bright A_CustomBulletAttack (10, 0, 1, random(2,6) * 3, "DRPGMarineBulletPuffSummoned", 0, CBAF_NORANDOM)
    PCBN E 1 A_FaceTarget
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineBattleRifleMk2ShotCounter", 30, "RetreatReload")
    TNT1 A 0 A_GiveInventory ("DRPGMarineBattleRifleMk2ShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/highpowerbattlerifle", CHAN_WEAPON, 1, 0, 0.7)
    PCBN F 3 Bright A_CustomBulletAttack (10, 0, 1, random(2,6) * 3, "DRPGMarineBulletPuffSummoned", 0, CBAF_NORANDOM)
    PCBN E 1 A_MonsterRefire(0, "Overwatch")
    Goto MissileCheck
  Reload:
    PCBN EE 4
    TNT1 A 0 A_PlaySound("weapons/hpbattlerifleunload", 7)
    PCBN EEEEEEEE 4
    PCBN E 2
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_PlaySound("weapons/hpbattlerifleload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineBattleRifleMk2ShotCounter", 30)
    PCBN EE 5
    TNT1 A 0 A_PlaySound("weapons/hpbattleriflecockflecock", 5)
    PCBN EEEEEE 1 A_FaceTarget (10)
    Goto See
  TacticReload:
    TNT1 A 0 A_Jump(128, 3)
    PCBN E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-random(3,8))
    PCBN E 1 A_FaceTarget
    PCBN EE 4
    TNT1 A 0 A_PlaySound("weapons/hpbattlerifleunload", 7)
    PCBN EEEEEEEE 4
    PCBN E 2
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_PlaySound("weapons/hpbattlerifleload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineBattleRifleMk2ShotCounter", 30)
    PCBN EE 5
    TNT1 A 0 A_PlaySound("weapons/hpbattleriflecock", 5)
    PCBN EEEEEE 1 A_FaceTarget (10)
    Goto See
  TacticStrafe:
    TNT1 A 0 A_Jump(64, "TacticStrafeLeft1")
    TNT1 A 0 A_Jump(64, "TacticStrafeRight1")
    TNT1 A 0 A_Jump(32, "TacticStrafeLeft2")
    TNT1 A 0 A_Jump(32, "TacticStrafeRight2")
    TNT1 A 0 A_Jump(128, "TacticStrafeBack1")
    Goto TacticStrafeBack2
  TacticStrafeLeft1:
    TNT1 A 0 A_SetAngle(90 + angle)
    PCBN AABBCCDD 1 A_Recoil(-1)
    PCBN E 1 A_FaceTarget
    Goto MissileCheck
  TacticStrafeLeft2:
    TNT1 A 0 A_SetAngle((90+random(-30,30)) + angle)
    PCBN AABBCCDD 1 A_Recoil(-random(1,2))
    PCBN E 1 A_FaceTarget
    Goto MissileCheck
  TacticStrafeRight1:
    TNT1 A 0 A_SetAngle(270 + angle)
    PCBN AABBCCDD 1 A_Recoil(-1)
    PCBN E 1 A_FaceTarget
    Goto MissileCheck
  TacticStrafeRight2:
    TNT1 A 0 A_SetAngle((270+random(-30,30)) + angle)
    PCBN AABBCCDD 1 A_Recoil(-random(1,2))
    PCBN E 1 A_FaceTarget
    Goto MissileCheck
  TacticStrafeBack1:
    PCBN E 1 A_FaceTarget
    PCBN AABBCCDD 1 A_Recoil(-1)
    PCBN E 1 A_FaceTarget
    Goto MissileCheck
  TacticStrafeBack2:
    PCBN E 1 A_FaceTarget
    PCBN AABBCCDD 1 A_Recoil(-random(1,2))
    PCBN E 1 A_FaceTarget
    Goto MissileCheck
  TacticStrafeBack3:
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 ThrustThing(angle*256/360+128, 8, 0, 0)
    TNT1 A 0 ThrustThingZ(0, 4, 0, 1)
    Goto See
  Overwatch:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineBattleRifleMk2ShotCounter", 30, "Reload")
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    PCBN E 5 A_FaceTarget (10)
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    PCBN E 5 A_FaceTarget (10)
    TNT1 A 0 A_Jump (200, 1)
    Goto Overwatch
    TNT1 A 0
    Goto See
  Pain:
    PCBN G 3
    PCBN G 3 A_Pain
    TNT1 A 0 A_JumpIfCloser (64, 1)
    Goto See
    TNT1 A 0 A_Jump(32, "TacticStrafe")
    TNT1 A 0 A_Jump(32, "TacticStrafeBack3")
    Goto See
  Death:
    PCBN H 4
    PCBN I 4 A_Scream
    PCBN J 4 A_NoBlocking
    PCBN K 4
    TNT1 A 0 A_SpawnItem ("DRPGBodyThud", 0, 0, 0, 0)
    PCBN LM 4
    PCBN N -1
    Stop
  XDeath:
    PCBN O 4
    PCBN P 4 A_XScream
    PCBN Q 4 A_NoBlocking
    TNT1 A 0 A_SpawnItem ("DRPGGibThud", 0, 0, 0, 0)
    PCBN RSTUV 4
    PCBN W -1
    Stop
  Crush:
    TNT1 A 1 A_SpawnItem("DRPGCrushedMarine",0,0,0,0)
    Stop
  }
}

ACTOR DRPGMarineBattleRifleSummoned3
{
  Health 175
  GibHealth -50
  Radius 20
  Height 56
  Speed 8
  PainChance 160
  DamageFactor "Crush", 10
  Monster
  +FLOORCLIP
  +AVOIDMELEE
  -COUNTKILL
  +AMBUSH
  +NEVERRESPAWN
  +QUICKTORETALIATE
  +NOBLOCKMONST
  +NOINFIGHTING
  +DONTHARMSPECIES
  +FRIENDLY
  -SOLID
  +ALWAYSFAST
  +QUICKTORETALIATE
  +MISSILEMORE
  +MISSILEEVENMORE
  +LOOKALLAROUND
  Obituary "%o stood in the line of fire for some reason."
  Species "Player"
  Tag "Marine"
  SeeSound "drpgmarinemale2/sight"
  PainSound "drpgmarinemale2/pain"
  DeathSound "drpgmarinemale2/death"
  ActiveSound "drpgmarinemale/active"
  AttackSound ""
  States
  {
  Spawn:
    TNT1 A 0 NoDelay ACS_NamedExecuteAlways("MonsterInit", 0, MF_NOPAYKILL | MF_NODROPS | MF_NAMEGEN)
    TNT1 A 0 A_GiveInventory ("DRPGMarineSummonedToken", 1)
    MGMR A 0 A_Look
    Goto FollowPlayer
  See:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineVanguardRifleShotCounter", 60, "RetreatReload")
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_JumpIfHealthLower (30, "SeeScared")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    TNT1 A 0 A_CheckSight("FollowPlayer")
    MGMR AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    Goto See
  FollowPlayer:
    MGMR AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfTargetInLOS("See")
    TNT1 A 0 A_CheckSight("CheckIfPlayerSee")
    Goto FollowPlayer
  CheckIfPlayerSee:
    TNT1 A 0
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 1)
    MGMR AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_FastChase
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    TNT1 A 0 A_JumpIfCloser(1000, 2)
    TNT1 AAA 0
    Goto FollowPlayer
  Waits:
    TNT1 A 0 A_JumpIf(GetDistance(AAPTR_TARGET) > 200, "FollowPlayer")
    MGMR E 1
    TNT1 A 0 A_ClearTarget
    TNT1 A 0 A_Jump(32, "Waits2")
    TNT1 A 0 A_Jump(32, "Waits3")
    TNT1 A 0 A_Jump(32, "See")
    MGMR EEE 4 A_Stop
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    MGMR EEE 4 A_Stop
    TNT1 AAA 0 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    MGMR E 0 A_Look
    MGMR E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits2:
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    MGMR EEE 6 A_Stop
    MGMR EEE 6 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    MGMR A 0 A_Look
    MGMR E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits3:
    TNT1 A 0
    TNT1 AAA 0
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    MGMR EEE 4 A_Stop
    MGMR EEE 4 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    MGMR A 0 A_Look
    MGMR E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  SeeScared:
    TNT1 A 0 A_JumpIfHealthLower (30, 1)
    Goto See
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 1)
    MGMR AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    MGMR AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    MGMR AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    MGMR AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    MGMR AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    MGMR AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    MGMR AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    MGMR AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, "SeeScared")
    Goto Overwatch
  RetreatReload:
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 1)
    TNT1 A 0 A_JumpIf(GetDistance(AAPTR_TARGET) > 64, "TacticReload")
    MGMR E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    MGMR AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (128, 2)
    TNT1 A 0 A_Jump (32, "Reload")
    MGMR E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    MGMR AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (96, 2)
    TNT1 A 0 A_Jump (64, "Reload")
    MGMR E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    MGMR AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (64, 2)
    TNT1 A 0 A_Jump (96, "Reload")
    MGMR E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    MGMR AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (32, 2)
    TNT1 A 0 A_Jump (128, "Reload")
    TNT1 A 0
    Goto RetreatReload+1
  Missile:
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    TNT1 A 0 A_JumpIfCloser (220, 7)
    MGMR EEEEEEEEEE 1 A_FaceTarget (10)
  MissileCheck:
    TNT1 A 0 A_Jump(64, "TacticStrafe")
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 A_JumpIfCloser (700, 1)
    Goto MissileSnipe
    TNT1 A 0 A_JumpIfCloser (220, 1)
    Goto MissileBurst
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineVanguardRifleShotCounter", 60, "RetreatReload")
    TNT1 A 0 A_GiveInventory ("DRPGMarineVanguardRifleShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/vanguardrifle", CHAN_WEAPON, 1, 0, 0.7)
    MGMR F 3 Bright A_CustomBulletAttack (12, 0, 1, random(3,7) * 3, "DRPGMarineBulletPuffSummoned", 0, CBAF_NORANDOM)
    MGMR E 1 A_MonsterRefire(80, "Overwatch")
    Goto MissileCheck
  MissileBurst:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineVanguardRifleShotCounter", 60, "RetreatReload")
    TNT1 A 0 A_GiveInventory ("DRPGMarineVanguardRifleShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/vanguardrifle", CHAN_WEAPON, 1, 0, 0.7)
    MGMR F 3 Bright A_CustomBulletAttack (12, 0, 1, random(3,7) * 3, "DRPGMarineBulletPuffSummoned", 0, CBAF_NORANDOM)
    MGMR E 1 A_FaceTarget
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineVanguardRifleShotCounter", 60, "RetreatReload")
    TNT1 A 0 A_GiveInventory ("DRPGMarineVanguardRifleShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/vanguardrifle", CHAN_WEAPON, 1, 0, 0.7)
    MGMR F 3 Bright A_CustomBulletAttack (12, 0, 1, random(3,7) * 3, "DRPGMarineBulletPuffSummoned", 0, CBAF_NORANDOM)
    MGMR E 1 A_FaceTarget
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineVanguardRifleShotCounter", 60, "RetreatReload")
    TNT1 A 0 A_GiveInventory ("DRPGMarineVanguardRifleShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/vanguardrifle", CHAN_WEAPON, 1, 0, 0.7)
    MGMR F 3 Bright A_CustomBulletAttack (12, 0, 1, random(3,7) * 3, "DRPGMarineBulletPuffSummoned", 0, CBAF_NORANDOM)
    MGMR E 1 A_FaceTarget
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineVanguardRifleShotCounter", 60, "RetreatReload")
    TNT1 A 0 A_GiveInventory ("DRPGMarineVanguardRifleShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/vanguardrifle", CHAN_WEAPON, 1, 0, 0.7)
    MGMR F 3 Bright A_CustomBulletAttack (12, 0, 1, random(3,7) * 3, "DRPGMarineBulletPuffSummoned", 0, CBAF_NORANDOM)
    MGMR E 1 A_FaceTarget
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineVanguardRifleShotCounter", 60, "RetreatReload")
    TNT1 A 0 A_GiveInventory ("DRPGMarineVanguardRifleShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/vanguardrifle", CHAN_WEAPON, 1, 0, 0.7)
    MGMR F 3 Bright A_CustomBulletAttack (12, 0, 1, random(3,7) * 3, "DRPGMarineBulletPuffSummoned", 0, CBAF_NORANDOM)
    MGMR E 1 A_FaceTarget
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineVanguardRifleShotCounter", 60, "RetreatReload")
    TNT1 A 0 A_GiveInventory ("DRPGMarineVanguardRifleShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/vanguardrifle", CHAN_WEAPON, 1, 0, 0.7)
    MGMR F 3 Bright A_CustomBulletAttack (12, 0, 1, random(3,7) * 3, "DRPGMarineBulletPuffSummoned", 0, CBAF_NORANDOM)
    MGMR E 1 A_FaceTarget
    MGMR EEEEEEEEEE 1 A_FaceTarget (10)
    MGMR E 1 A_MonsterRefire(0, "Overwatch")
    Goto MissileCheck
  MissileSnipe:
    TNT1 A 0 A_Jump (256,1,10,15,20,25)
    MGMR EEEEEEEEEEEEEEEEEEEEEEEEEEEEEE 1 A_FaceTarget (10)
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineVanguardRifleShotCounter", 60, "RetreatReload")
    TNT1 A 0 A_GiveInventory ("DRPGMarineVanguardRifleShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/vanguardrifle", CHAN_WEAPON, 1, 0, 0.7)
    MGMR F 3 Bright A_CustomBulletAttack (8, 0, 1, random(3,7) * 3, "DRPGMarineBulletPuffSummoned", 0, CBAF_NORANDOM)
    MGMR E 1 A_FaceTarget
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineVanguardRifleShotCounter", 60, "RetreatReload")
    TNT1 A 0 A_GiveInventory ("DRPGMarineVanguardRifleShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/vanguardrifle", CHAN_WEAPON, 1, 0, 0.7)
    MGMR F 3 Bright A_CustomBulletAttack (8, 0, 1, random(3,7) * 3, "DRPGMarineBulletPuffSummoned", 0, CBAF_NORANDOM)
    MGMR E 1 A_FaceTarget
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineVanguardRifleShotCounter", 60, "RetreatReload")
    TNT1 A 0 A_GiveInventory ("DRPGMarineVanguardRifleShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/vanguardrifle", CHAN_WEAPON, 1, 0, 0.7)
    MGMR F 3 Bright A_CustomBulletAttack (8, 0, 1, random(3,7) * 3, "DRPGMarineBulletPuffSummoned", 0, CBAF_NORANDOM)
    MGMR E 1 A_MonsterRefire(0, "Overwatch")
    Goto MissileCheck
  Reload:
    MGMR EE 4
    TNT1 A 0 A_PlaySound("weapons/vanguardrifleunload", 7)
    MGMR EEEEEEEE 4
    MGMR E 2
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_PlaySound("weapons/vanguardrifleload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineVanguardRifleShotCounter", 60)
    MGMR EE 5
    TNT1 A 0 A_PlaySound("weapons/vanguardriflecock", 5)
    MGMR EEEEEE 1 A_FaceTarget (10)
    Goto See
  TacticReload:
    TNT1 A 0 A_Jump(128, 3)
    MGMR E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-random(3,8))
    MGMR E 1 A_FaceTarget
    MGMR EE 4
    TNT1 A 0 A_PlaySound("weapons/vanguardrifleunload", 7)
    MGMR EEEEEEEE 4
    MGMR E 2
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_PlaySound("weapons/vanguardrifleload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineVanguardRifleShotCounter", 60)
    MGMR EE 5
    TNT1 A 0 A_PlaySound("weapons/vanguardriflecock", 5)
    MGMR EEEEEE 1 A_FaceTarget (10)
    Goto See
  TacticStrafe:
    TNT1 A 0 A_Jump(64, "TacticStrafeLeft1")
    TNT1 A 0 A_Jump(64, "TacticStrafeRight1")
    TNT1 A 0 A_Jump(32, "TacticStrafeLeft2")
    TNT1 A 0 A_Jump(32, "TacticStrafeRight2")
    TNT1 A 0 A_Jump(128, "TacticStrafeBack1")
    Goto TacticStrafeBack2
  TacticStrafeLeft1:
    TNT1 A 0 A_SetAngle(90 + angle)
    MGMR AABBCCDD 1 A_Recoil(-1)
    MGMR E 1 A_FaceTarget
    Goto MissileCheck
  TacticStrafeLeft2:
    TNT1 A 0 A_SetAngle((90+random(-30,30)) + angle)
    MGMR AABBCCDD 1 A_Recoil(-random(1,2))
    MGMR E 1 A_FaceTarget
    Goto MissileCheck
  TacticStrafeRight1:
    TNT1 A 0 A_SetAngle(270 + angle)
    MGMR AABBCCDD 1 A_Recoil(-1)
    MGMR E 1 A_FaceTarget
    Goto MissileCheck
  TacticStrafeRight2:
    TNT1 A 0 A_SetAngle((270+random(-30,30)) + angle)
    MGMR AABBCCDD 1 A_Recoil(-random(1,2))
    MGMR E 1 A_FaceTarget
    Goto MissileCheck
  TacticStrafeBack1:
    MGMR E 1 A_FaceTarget
    MGMR AABBCCDD 1 A_Recoil(-1)
    MGMR E 1 A_FaceTarget
    Goto MissileCheck
  TacticStrafeBack2:
    MGMR E 1 A_FaceTarget
    MGMR AABBCCDD 1 A_Recoil(-random(1,2))
    MGMR E 1 A_FaceTarget
    Goto MissileCheck
  TacticStrafeBack3:
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 ThrustThing(angle*256/360+128, 8, 0, 0)
    TNT1 A 0 ThrustThingZ(0, 4, 0, 1)
    Goto See
  Overwatch:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineVanguardRifleShotCounter", 60, "Reload")
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    MGMR E 5 A_FaceTarget (10)
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    MGMR E 5 A_FaceTarget (10)
    TNT1 A 0 A_Jump (200, 1)
    Goto Overwatch
    TNT1 A 0
    Goto See
  Pain:
    MGMR G 3
    MGMR G 3 A_Pain
    TNT1 A 0 A_JumpIfCloser (64, 1)
    Goto See
    TNT1 A 0 A_Jump(32, "TacticStrafe")
    TNT1 A 0 A_Jump(32, "TacticStrafeBack3")
    Goto See
  Death:
    MGMR H 4
    MGMR I 4 A_Scream
    MGMR J 4 A_NoBlocking
    MGMR K 4
    TNT1 A 0 A_SpawnItem ("DRPGBodyThud", 0, 0, 0, 0)
    MGMR LM 4
    MGMR N -1
    Stop
  XDeath:
    MGMR O 4
    MGMR P 4 A_XScream
    MGMR Q 4 A_NoBlocking
    TNT1 A 0 A_SpawnItem ("DRPGGibThud", 0, 0, 0, 0)
    MGMR RSTUV 4
    MGMR W -1
    Stop
  Crush:
    TNT1 A 1 A_SpawnItem("DRPGCrushedMarine",0,0,0,0)
    Stop
  }
}

ACTOR DRPGMarineShotgunSummoned2
{
  Health 175
  GibHealth -50
  Radius 20
  Height 56
  Speed 8
  PainChance 192
  DamageFactor "Crush", 10
  Monster
  +FLOORCLIP
  +AVOIDMELEE
  -COUNTKILL
  +AMBUSH
  +NEVERRESPAWN
  +QUICKTORETALIATE
  +NOBLOCKMONST
  +NOINFIGHTING
  +DONTHARMSPECIES
  +FRIENDLY
  -SOLID
  +ALWAYSFAST
  +QUICKTORETALIATE
  +MISSILEMORE
  +MISSILEEVENMORE
  +LOOKALLAROUND
  Obituary "%o stood in the line of fire for some reason."
  Species "Player"
  Tag "Marine"
  SeeSound "drpgmarinemale2/sight"
  PainSound "drpgmarinemale2/pain"
  DeathSound "drpgmarinemale2/death"
  ActiveSound "drpgmarinemale/active"
  AttackSound ""
  States
  {
  Spawn:
    TNT1 A 0 NoDelay ACS_NamedExecuteAlways("MonsterInit", 0, MF_NOPAYKILL | MF_NODROPS | MF_NAMEGEN | MF_RANKLOSS)
    TNT1 A 0 A_GiveInventory ("DRPGMarineSummonedToken", 1)
    PL32 A 0 A_Look
    Goto FollowPlayer
  See:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunShotCounter", 5, "RetreatReload")
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_JumpIfHealthLower (30, "SeeScared")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    TNT1 A 0 A_CheckSight("FollowPlayer")
    PL32 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    Goto See
  FollowPlayer:
    PL32 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfTargetInLOS("See")
    TNT1 A 0 A_CheckSight("CheckIfPlayerSee")
    Goto FollowPlayer
  CheckIfPlayerSee:
    TNT1 A 0
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 1)
    PL32 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_FastChase
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    TNT1 A 0 A_JumpIfCloser(1000, 2)
    TNT1 AAA 0
    Goto FollowPlayer
  Waits:
    TNT1 A 0 A_JumpIf(GetDistance(AAPTR_TARGET) > 200, "FollowPlayer")
    PL32 E 1
    TNT1 A 0 A_ClearTarget
    TNT1 A 0 A_Jump(32, "Waits2")
    TNT1 A 0 A_Jump(32, "Waits3")
    TNT1 A 0 A_Jump(32, "See")
    PL32 EEE 4 A_Stop
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PL32 EEE 4 A_Stop
    TNT1 AAA 0 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PL32 E 0 A_Look
    PL32 E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits2:
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PL32 EEE 6 A_Stop
    PL32 EEE 6 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PL32 A 0 A_Look
    PL32 E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits3:
    TNT1 A 0
    TNT1 AAA 0
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PL32 EEE 4 A_Stop
    PL32 EEE 4 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PL32 A 0 A_Look
    PL32 E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  SeeScared:
    TNT1 A 0 A_JumpIfHealthLower (30, 1)
    Goto See
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 1)
    PL32 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PL32 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PL32 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PL32 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PL32 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PL32 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PL32 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PL32 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, "SeeScared")
    Goto Overwatch
  RetreatReload:
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 1)
    TNT1 A 0 A_JumpIf(GetDistance(AAPTR_TARGET) > 64, "TacticReload")
    PL32 X 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PL32 AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (128, 2)
    TNT1 A 0 A_Jump (32, "Reload")
    PL32 X 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PL32 AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (96, 2)
    TNT1 A 0 A_Jump (64, "Reload")
    PL32 X 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PL32 AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (64, 2)
    TNT1 A 0 A_Jump (96, "Reload")
    PL32 X 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PL32 AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (32, 2)
    TNT1 A 0 A_Jump (128, "Reload")
    TNT1 A 0
    Goto RetreatReload+1
  Missile:
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    TNT1 A 0 A_Jump (32, "TacticStrafe")
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunShotCounter", 5, "RetreatReload")
    TNT1 A 0 A_JumpIfHealthLower (30, 2)
    TNT1 A 0 A_JumpIfCloser (600, 1)
    Goto MissileCrouch
    PL32 EEEEEEEE 1 A_FaceTarget (10)
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 A_MonsterRefire (0, "Overwatch")
    TNT1 A 0 A_GiveInventory ("DRPGMarineCombatShotgunShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/combatshotgun", CHAN_WEAPON, 1, 0, 0.7)
    PL32 F 4 Bright A_CustomBulletAttack (18, 0, 5, random(2,6) * 3, "DRPGMarineBulletPuffSummoned", 0, CBAF_NORANDOM)
    PL32 E 6
    TNT1 A 0 A_JumpIfHealthLower (30, 2)
    TNT1 A 0
    Goto Missile
  Overwatch:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunShotCounter", 5, "Reload")
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    PL32 E 4 A_FaceTarget
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    PL32 E 4 A_FaceTarget
    TNT1 A 0 A_Jump (128, 1)
    Goto Overwatch
    TNT1 A 0
    Goto See
  MissileCrouch:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunShotCounter", 5, "RetreatReload")
    P32C AAAAAAAA 1 A_FaceTarget (10)
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 A_MonsterRefire (0, "OverwatchCrouch")
    TNT1 A 0 A_GiveInventory ("DRPGMarineCombatShotgunShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/combatshotgun", CHAN_WEAPON, 1, 0, 0.7)
    P32C F 4 Bright A_CustomBulletAttack (14, 0, 5, random(2,6) * 3, "DRPGMarineBulletPuffSummoned", 0, CBAF_NORANDOM)
    P32C A 6
    P32C A 5
    Goto MissileCrouch
  OverwatchCrouch:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunShotCounter", 5, "Reload")
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_Chase ("", "MissileCrouch", CHF_DONTMOVE)
    P32C A 4 A_FaceTarget
    TNT1 A 0 A_Chase ("", "MissileCrouch", CHF_DONTMOVE)
    P32C A 4 A_FaceTarget
    TNT1 A 0 A_Jump (128, 1)
    Goto Overwatch
    TNT1 A 0
    Goto See
  Reload:
    PL32 EE 4 A_FaceTarget
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunShotCounter", 0, "See")
    PL32 EEEE 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunShotCounter", 0, "See")
    PL32 EEEE 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunShotCounter", 0, "See")
    PL32 EEEE 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunShotCounter", 0, "See")
    PL32 EEEE 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/combatshotgunpump", 7)
    PL32 EE 4 A_FaceTarget
    PL32 EE 4 A_FaceTarget
    Goto See
  TacticReload:
    TNT1 A 0 A_JumpIfCloser (600, 1)
    Goto TacticReloadCrouch
    PL32 EE 4 A_FaceTarget (0, 30, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-random(3,8))
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunShotCounter", 0, "See")
    PL32 EEEE 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunShotCounter", 0, "See")
    PL32 EEEE 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunShotCounter", 0, "See")
    PL32 EEEE 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunShotCounter", 0, "See")
    PL32 EEEE 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/combatshotgunpump", 7)
    PL32 EE 4 A_FaceTarget
    PL32 EE 4 A_FaceTarget
    Goto See
  TacticStrafe:
    TNT1 A 0 A_Jump(64, "TacticStrafeLeft1")
    TNT1 A 0 A_Jump(64, "TacticStrafeRight1")
    TNT1 A 0 A_Jump(32, "TacticStrafeLeft2")
    TNT1 A 0 A_Jump(32, "TacticStrafeRight2")
    TNT1 A 0 A_Jump(128, "TacticStrafeBack1")
    Goto TacticStrafeBack2
  TacticStrafeLeft1:
    TNT1 A 0 A_SetAngle(90 + angle)
    PL32 AABBCCDD 1 A_Recoil(-1)
    PL32 E 1 A_FaceTarget
    Goto Missile
  TacticStrafeLeft2:
    TNT1 A 0 A_SetAngle((90+random(-30,30)) + angle)
    PL32 AABBCCDD 1 A_Recoil(-random(1,2))
    PL32 E 1 A_FaceTarget
    Goto Missile
  TacticStrafeRight1:
    TNT1 A 0 A_SetAngle(270 + angle)
    PL32 AABBCCDD 1 A_Recoil(-1)
    PL32 E 1 A_FaceTarget
    Goto Missile
  TacticStrafeRight2:
    TNT1 A 0 A_SetAngle((270+random(-30,30)) + angle)
    PL32 AABBCCDD 1 A_Recoil(-random(1,2))
    PL32 E 1 A_FaceTarget
    Goto Missile
  TacticStrafeBack1:
    PL32 E 1 A_FaceTarget
    PL32 AABBCCDD 1 A_Recoil(-1)
    PL32 E 1 A_FaceTarget
    Goto Missile
  TacticStrafeBack2:
    PL32 E 1 A_FaceTarget
    PL32 AABBCCDD 1 A_Recoil(-random(1,2))
    PL32 E 1 A_FaceTarget
    Goto Missile
  TacticStrafeBack3:
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 ThrustThing(angle*256/360+128, 8, 0, 0)
    TNT1 A 0 ThrustThingZ(0, 4, 0, 1)
    Goto See
  ReloadCrouch:
    P32C AA 4 A_FaceTarget (0, 30, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-random(3,8))
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunShotCounter", 0, "See")
    P32C AAAA 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunShotCounter", 0, "See")
    P32C AAAA 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunShotCounter", 0, "See")
    P32C AAAA 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunShotCounter", 0, "See")
    P32C AAAA 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/combatshotgunpump", 7)
    P32C AA 4 A_FaceTarget
    P32C AA 4 A_FaceTarget
    Goto Missile
  TacticReloadCrouch:
    P32C AA 4 A_FaceTarget (0, 30, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-random(3,8))
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunShotCounter", 0, "See")
    P32C AAAA 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunShotCounter", 0, "See")
    P32C AAAA 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunShotCounter", 0, "See")
    P32C AAAA 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunShotCounter", 0, "See")
    P32C AAAA 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/combatshotgunpump", 7)
    P32C AA 4 A_FaceTarget
    P32C AA 4 A_FaceTarget
    Goto See
  Pain:
    PL32 G 3
    PL32 G 3 A_Pain
    TNT1 A 0 A_JumpIfCloser (64, 1)
    Goto See
    TNT1 A 0 A_Jump(32, "TacticStrafe")
    TNT1 A 0 A_Jump(32, "TacticStrafeBack3")
    Goto See
  Death:
    PL32 H 4
    PL32 I 4 A_Scream
    PL32 J 4 A_NoBlocking
    PL32 K 4
    TNT1 A 0 A_SpawnItem ("DRPGBodyThud", 0, 0, 0, 0)
    PL32 LM 4
    PL32 N -1
    Stop
  XDeath:
    PL32 O 4
    PL32 P 4 A_XScream
    PL32 Q 4 A_NoBlocking
    TNT1 A 0 A_SpawnItem ("DRPGGibThud", 0, 0, 0, 0)
    PL32 RSTUV 4
    PL32 W -1
    Stop
  Crush:
    TNT1 A 1 A_SpawnItem("DRPGCrushedMarine",0,0,0,0)
    Stop
  }
}

ACTOR DRPGMarineShotgunSummoned3
{
  Health 200
  GibHealth -50
  Radius 20
  Height 56
  Speed 8
  PainChance 160
  DamageFactor "Crush", 10
  Monster
  +FLOORCLIP
  +AVOIDMELEE
  -COUNTKILL
  +AMBUSH
  +NEVERRESPAWN
  +QUICKTORETALIATE
  +NOBLOCKMONST
  +NOINFIGHTING
  +DONTHARMSPECIES
  +FRIENDLY
  -SOLID
  +ALWAYSFAST
  +QUICKTORETALIATE
  +MISSILEMORE
  +MISSILEEVENMORE
  +LOOKALLAROUND
  Obituary "%o stood in the line of fire for some reason."
  Species "Player"
  Tag "Marine"
  SeeSound "drpgmarinemale2/sight"
  PainSound "drpgmarinemale2/pain"
  DeathSound "drpgmarinemale2/death"
  ActiveSound "drpgmarinemale/active"
  AttackSound ""
  States
  {
  Spawn:
    TNT1 A 0 NoDelay ACS_NamedExecuteAlways("MonsterInit", 0, MF_NOPAYKILL | MF_NODROPS | MF_NAMEGEN | MF_RANKLOSS)
    TNT1 A 0 A_GiveInventory ("DRPGMarineSummonedToken", 1)
    PASG A 0 A_Look
    Goto FollowPlayer
  See:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 8, "RetreatReload")
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_JumpIfHealthLower (30, "SeeScared")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    TNT1 A 0 A_CheckSight("FollowPlayer")
    PASG AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    Goto See
  FollowPlayer:
    PASG AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfTargetInLOS("See")
    TNT1 A 0 A_CheckSight("CheckIfPlayerSee")
    Goto FollowPlayer
  CheckIfPlayerSee:
    TNT1 A 0
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 1)
    PASG AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_FastChase
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    TNT1 A 0 A_JumpIfCloser(1000, 2)
    TNT1 AAA 0
    Goto FollowPlayer
  Waits:
    TNT1 A 0 A_JumpIf(GetDistance(AAPTR_TARGET) > 200, "FollowPlayer")
    PASG E 1
    TNT1 A 0 A_ClearTarget
    TNT1 A 0 A_Jump(32, "Waits2")
    TNT1 A 0 A_Jump(32, "Waits3")
    TNT1 A 0 A_Jump(32, "See")
    PASG EEE 4 A_Stop
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PASG EEE 4 A_Stop
    TNT1 AAA 0 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PASG E 0 A_Look
    PASG E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits2:
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PASG EEE 6 A_Stop
    PASG EEE 6 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PASG A 0 A_Look
    PASG E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits3:
    TNT1 A 0
    TNT1 AAA 0
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PASG EEE 4 A_Stop
    PASG EEE 4 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PASG A 0 A_Look
    PASG E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  SeeScared:
    TNT1 A 0 A_JumpIfHealthLower (30, 1)
    Goto See
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 1)
    PASG AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PASG AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PASG AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PASG AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PASG AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PASG AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PASG AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PASG AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, "SeeScared")
    Goto Overwatch
  RetreatReload:
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 1)
    TNT1 A 0 A_JumpIf(GetDistance(AAPTR_TARGET) > 64, "TacticReload")
    PASG X 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PASG AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (128, 2)
    TNT1 A 0 A_Jump (32, "Reload")
    PASG X 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PASG AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (96, 2)
    TNT1 A 0 A_Jump (64, "Reload")
    PASG X 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PASG AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (64, 2)
    TNT1 A 0 A_Jump (96, "Reload")
    PASG X 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PASG AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (32, 2)
    TNT1 A 0 A_Jump (128, "Reload")
    TNT1 A 0
    Goto RetreatReload+1
  Missile:
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    TNT1 A 0 A_Jump (32, "TacticStrafe")
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 8, "RetreatReload")
    TNT1 A 0 A_JumpIfHealthLower (30, 2)
    TNT1 A 0 A_JumpIfCloser (600, 1)
    Goto MissileCrouch
    PASG EEEEEEEE 1 A_FaceTarget (10)
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 A_MonsterRefire (0, "Overwatch")
    TNT1 A 0 A_GiveInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/heavycombatshotgun", CHAN_WEAPON, 1, 0, 0.7)
    PASG F 4 Bright A_CustomBulletAttack (16, 0, 5, random(3,7) * 3, "DRPGMarineBulletPuffSummoned", 0, CBAF_NORANDOM)
    PASG E 6
    TNT1 A 0 A_JumpIfHealthLower (30, 2)
    TNT1 A 0
    Goto Missile
  Overwatch:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 8, "Reload")
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    PASG E 4 A_FaceTarget
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    PASG E 4 A_FaceTarget
    TNT1 A 0 A_Jump (128, 1)
    Goto Overwatch
    TNT1 A 0
    Goto See
  MissileCrouch:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 8, "RetreatReload")
    PASC AAAAAAAA 1 A_FaceTarget (10)
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 A_MonsterRefire (0, "OverwatchCrouch")
    TNT1 A 0 A_GiveInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/heavycombatshotgun", CHAN_WEAPON, 1, 0, 0.7)
    PASC F 4 Bright A_CustomBulletAttack (12, 0, 5, random(3,7) * 3, "DRPGMarineBulletPuffSummoned", 0, CBAF_NORANDOM)
    PASC A 6
    PASC A 5
    Goto MissileCrouch
  OverwatchCrouch:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 8, "Reload")
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_Chase ("", "MissileCrouch", CHF_DONTMOVE)
    PASC A 4 A_FaceTarget
    TNT1 A 0 A_Chase ("", "MissileCrouch", CHF_DONTMOVE)
    PASC A 4 A_FaceTarget
    TNT1 A 0 A_Jump (128, 1)
    Goto Overwatch
    TNT1 A 0
    Goto See
  Reload:
    PASG EE 4 A_FaceTarget
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 0, "See")
    PASG EEEE 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 0, "See")
    PASG EEEE 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 0, "See")
    PASG EEEE 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 0, "See")
    PASG EEEE 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 0, "See")
    PASG EEEE 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 0, "See")
    PASG EEEE 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 0, "See")
    PASG EEEE 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/heavycombatshotgunpump", 7)
    PASG EE 4 A_FaceTarget
    PASG EE 4 A_FaceTarget
    Goto See
  TacticReload:
    TNT1 A 0 A_JumpIfCloser (600, 1)
    Goto TacticReloadCrouch
    PASG EE 4 A_FaceTarget (0, 30, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-random(3,8))
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 0, "See")
    PASG EEEE 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 0, "See")
    PASG EEEE 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 0, "See")
    PASG EEEE 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 0, "See")
    PASG EEEE 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 0, "See")
    PASG EEEE 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 0, "See")
    PASG EEEE 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 0, "See")
    PASG EEEE 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/heavycombatshotgunpump", 7)
    PASG EE 4 A_FaceTarget
    PASG EE 4 A_FaceTarget
    Goto See
  TacticStrafe:
    TNT1 A 0 A_Jump(64, "TacticStrafeLeft1")
    TNT1 A 0 A_Jump(64, "TacticStrafeRight1")
    TNT1 A 0 A_Jump(32, "TacticStrafeLeft2")
    TNT1 A 0 A_Jump(32, "TacticStrafeRight2")
    TNT1 A 0 A_Jump(128, "TacticStrafeBack1")
    Goto TacticStrafeBack2
  TacticStrafeLeft1:
    TNT1 A 0 A_SetAngle(90 + angle)
    PASG AABBCCDD 1 A_Recoil(-1)
    PASG E 1 A_FaceTarget
    Goto Missile
  TacticStrafeLeft2:
    TNT1 A 0 A_SetAngle((90+random(-30,30)) + angle)
    PASG AABBCCDD 1 A_Recoil(-random(1,2))
    PASG E 1 A_FaceTarget
    Goto Missile
  TacticStrafeRight1:
    TNT1 A 0 A_SetAngle(270 + angle)
    PASG AABBCCDD 1 A_Recoil(-1)
    PASG E 1 A_FaceTarget
    Goto Missile
  TacticStrafeRight2:
    TNT1 A 0 A_SetAngle((270+random(-30,30)) + angle)
    PASG AABBCCDD 1 A_Recoil(-random(1,2))
    PASG E 1 A_FaceTarget
    Goto Missile
  TacticStrafeBack1:
    PASG E 1 A_FaceTarget
    PASG AABBCCDD 1 A_Recoil(-1)
    PASG E 1 A_FaceTarget
    Goto Missile
  TacticStrafeBack2:
    PASG E 1 A_FaceTarget
    PASG AABBCCDD 1 A_Recoil(-random(1,2))
    PASG E 1 A_FaceTarget
    Goto Missile
  TacticStrafeBack3:
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 ThrustThing(angle*256/360+128, 8, 0, 0)
    TNT1 A 0 ThrustThingZ(0, 4, 0, 1)
    Goto See
  ReloadCrouch:
    PASC AA 4 A_FaceTarget (0, 30, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-random(3,8))
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 0, "See")
    PASC AAAA 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 0, "See")
    PASC AAAA 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 0, "See")
    PASC AAAA 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 0, "See")
    PASC AAAA 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 0, "See")
    PASC AAAA 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 0, "See")
    PASC AAAA 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 0, "See")
    PASC AAAA 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/heavycombatshotgunpump", 7)
    PASC AA 4 A_FaceTarget
    PASC AA 4 A_FaceTarget
    Goto Missile
  TacticReloadCrouch:
    PASC AA 4 A_FaceTarget (0, 30, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-random(3,8))
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 0, "See")
    PASC AAAA 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 0, "See")
    PASC AAAA 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 0, "See")
    PASC AAAA 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 0, "See")
    PASC AAAA 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 0, "See")
    PASC AAAA 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 0, "See")
    PASC AAAA 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 0, "See")
    PASC AAAA 4 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/shellload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineCombatShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/heavycombatshotgunpump", 7)
    PASC AA 4 A_FaceTarget
    PASC AA 4 A_FaceTarget
    Goto See
  Pain:
    PASG G 3
    PASG G 3 A_Pain
    TNT1 A 0 A_JumpIfCloser (64, 1)
    Goto See
    TNT1 A 0 A_Jump(32, "TacticStrafe")
    TNT1 A 0 A_Jump(32, "TacticStrafeBack3")
    Goto See
  Death:
    PASG H 4
    PASG I 4 A_Scream
    PASG J 4 A_NoBlocking
    PASG K 4
    TNT1 A 0 A_SpawnItem ("DRPGBodyThud", 0, 0, 0, 0)
    PASG LM 4
    PASG N -1
    Stop
  XDeath:
    PASG O 4
    PASG P 4 A_XScream
    PASG Q 4 A_NoBlocking
    TNT1 A 0 A_SpawnItem ("DRPGGibThud", 0, 0, 0, 0)
    PASG RSTUV 4
    PASG W -1
    Stop
  Crush:
    TNT1 A 1 A_SpawnItem("DRPGCrushedMarine",0,0,0,0)
    Stop
  }
}

ACTOR DRPGMarineDoubleShotgunSummoned2
{
  Health 200
  GibHealth -50
  Radius 20
  Height 56
  Speed 8
  PainChance 192
  DamageFactor "Crush", 10
  Monster
  +FLOORCLIP
  +AVOIDMELEE
  -COUNTKILL
  +AMBUSH
  +NEVERRESPAWN
  +QUICKTORETALIATE
  +NOBLOCKMONST
  +NOINFIGHTING
  +DONTHARMSPECIES
  +FRIENDLY
  -SOLID
  +ALWAYSFAST
  +QUICKTORETALIATE
  +MISSILEMORE
  +MISSILEEVENMORE
  +LOOKALLAROUND
  Obituary "%o stood in the line of fire for some reason."
  Species "Player"
  Tag "Marine"
  SeeSound "drpgmarinemale1/sight"
  PainSound "drpgmarinemale1/pain"
  DeathSound "drpgmarinemale1/death"
  ActiveSound "drpgmarinemale/active"
  AttackSound ""
  States
  {
  Spawn:
    TNT1 A 0 NoDelay ACS_NamedExecuteAlways("MonsterInit", 0, MF_NOPAYKILL | MF_NODROPS | MF_NAMEGEN | MF_RANKLOSS)
    TNT1 A 0 A_GiveInventory ("DRPGMarineSummonedToken", 1)
    PQST A 0 A_Look
    Goto FollowPlayer
  See:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineQuadShotgunShotCounter", 2, "RetreatReload")
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_JumpIfHealthLower (30, "SeeScared")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    TNT1 A 0 A_CheckSight("FollowPlayer")
    PQST AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    Goto See
  FollowPlayer:
    PQST AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfTargetInLOS("See")
    TNT1 A 0 A_CheckSight("CheckIfPlayerSee")
    Goto FollowPlayer
  CheckIfPlayerSee:
    TNT1 A 0
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 1)
    PQST AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_FastChase
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    TNT1 A 0 A_JumpIfCloser(1000, 2)
    TNT1 AAA 0
    Goto FollowPlayer
  Waits:
    TNT1 A 0 A_JumpIf(GetDistance(AAPTR_TARGET) > 200, "FollowPlayer")
    PQST E 1
    TNT1 A 0 A_ClearTarget
    TNT1 A 0 A_Jump(32, "Waits2")
    TNT1 A 0 A_Jump(32, "Waits3")
    TNT1 A 0 A_Jump(32, "See")
    PQST EEE 4 A_Stop
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PQST EEE 4 A_Stop
    TNT1 AAA 0 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PQST E 0 A_Look
    PQST E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits2:
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PQST EEE 6 A_Stop
    PQST EEE 6 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PQST A 0 A_Look
    PQST E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits3:
    TNT1 A 0
    TNT1 AAA 0
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PQST EEE 4 A_Stop
    PQST EEE 4 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PQST A 0 A_Look
    PQST E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  SeeScared:
    TNT1 A 0 A_JumpIfHealthLower (30, 1)
    Goto See
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 1)
    PQST AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PQST AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PQST AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PQST AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PQST AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PQST AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PQST AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PQST AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, "SeeScared")
    Goto Overwatch
  RetreatReload:
    TNT1 A 0 A_Jump(64, "TacticReload")
    PQST E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PQST AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "Reload")
    Goto RetreatReload
  Missile:
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    TNT1 A 0 A_Jump (64, "TacticStrafe")
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineQuadShotgunShotCounter", 2, "RetreatReload")
    PQST EEEEEEEEEEEE 1 A_FaceTarget (10)
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 A_MonsterRefire (0, "Overwatch")
    TNT1 A 0 A_GiveInventory ("DRPGMarineQuadShotgunShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/heavydoubleshotgun", CHAN_WEAPON, 1, 0, 0.7)
    PQST F 4 Bright A_CustomBulletAttack (18, 5, 12, random(2,6) * 3, "DRPGMarineBulletPuffSummoned", 0, CBAF_NORANDOM)
    PQST E 6
    TNT1 A 0 A_JumpIfHealthLower (30, 2)
    TNT1 A 0
    Goto Missile
  Overwatch:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineQuadShotgunShotCounter", 2, "Reload")
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    PQST E 4 A_FaceTarget
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    PQST E 4 A_FaceTarget
    TNT1 A 0 A_Jump (128, 1)
    Goto Overwatch
    TNT1 A 0
    Goto See
  Reload:
    PQST EE 7
    TNT1 A 0 A_PlaySound("weapons/heavydoubleshotgunopen", 7)
    PQST E 21
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_TakeInventory ("DRPGMarineQuadShotgunShotCounter", 2)
    TNT1 A 0 A_PlaySound("weapons/heavydoubleshotgunload", 7)
    PQST E 18
    TNT1 A 0 A_PlaySound("weapons/heavydoubleshotgunclose", 7)
    PQST E 5 A_FaceTarget
    Goto See
  TacticReload:
    PQST E 1 A_FaceTarget (0, 30, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-random(3,8))
    PQST E 1 A_FaceTarget
    PQST EE 7
    TNT1 A 0 A_PlaySound("weapons/heavydoubleshotgunopen", 7)
    PQST E 21
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_TakeInventory ("DRPGMarineQuadShotgunShotCounter", 2)
    TNT1 A 0 A_PlaySound("weapons/heavydoubleshotgunload", 7)
    PQST E 18
    TNT1 A 0 A_PlaySound("weapons/heavydoubleshotgunclose", 7)
    PQST E 5 A_FaceTarget
    Goto See
  TacticStrafe:
    TNT1 A 0 A_Jump(64, "TacticStrafeLeft1")
    TNT1 A 0 A_Jump(64, "TacticStrafeRight1")
    TNT1 A 0 A_Jump(32, "TacticStrafeLeft2")
    TNT1 A 0 A_Jump(32, "TacticStrafeRight2")
    TNT1 A 0 A_Jump(128, "TacticStrafeBack1")
    Goto TacticStrafeBack2
  TacticStrafeLeft1:
    TNT1 A 0 A_SetAngle(90 + angle)
    PQST AABBCCDD 1 A_Recoil(-1)
    PQST E 1 A_FaceTarget
    Goto Missile
  TacticStrafeLeft2:
    TNT1 A 0 A_SetAngle((90+random(-30,30)) + angle)
    PQST AABBCCDD 1 A_Recoil(-random(1,2))
    PQST E 1 A_FaceTarget
    Goto Missile
  TacticStrafeRight1:
    TNT1 A 0 A_SetAngle(270 + angle)
    PQST AABBCCDD 1 A_Recoil(-1)
    PQST E 1 A_FaceTarget
    Goto Missile
  TacticStrafeRight2:
    TNT1 A 0 A_SetAngle((270+random(-30,30)) + angle)
    PQST AABBCCDD 1 A_Recoil(-random(1,2))
    PQST E 1 A_FaceTarget
    Goto Missile
  TacticStrafeBack1:
    PQST E 1 A_FaceTarget
    PQST AABBCCDD 1 A_Recoil(-1)
    PQST E 1 A_FaceTarget
    Goto Missile
  TacticStrafeBack2:
    PQST E 1 A_FaceTarget
    PQST AABBCCDD 1 A_Recoil(-random(1,2))
    PQST E 1 A_FaceTarget
    Goto Missile
  TacticStrafeBack3:
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 ThrustThing(angle*256/360+128, 8, 0, 0)
    TNT1 A 0 ThrustThingZ(0, 4, 0, 1)
    Goto See
  Pain:
    PQST G 3
    PQST G 3 A_Pain
    TNT1 A 0 A_JumpIfCloser (64, 1)
    Goto See
    TNT1 A 0 A_Jump(32, "TacticStrafe")
    TNT1 A 0 A_Jump(32, "TacticStrafeBack3")
    Goto See
  Death:
    PQST H 4
    PQST I 4 A_Scream
    PQST J 4 A_NoBlocking
    PQST K 4
    TNT1 A 0 A_SpawnItem ("DRPGBodyThud", 0, 0, 0, 0)
    PQST LM 4
    PQST N -1
    Stop
  XDeath:
    PQST O 4
    PQST P 4 A_XScream
    PQST Q 4 A_NoBlocking
    TNT1 A 0 A_SpawnItem ("DRPGGibThud", 0, 0, 0, 0)
    PQST RSTUV 4
    PQST W -1
    Stop
  Crush:
    TNT1 A 1 A_SpawnItem("DRPGCrushedMarine",0,0,0,0)
    Stop
  }
}

ACTOR DRPGMarineDoubleShotgunSummoned3
{
  Health 225
  GibHealth -50
  Radius 20
  Height 56
  Speed 8
  PainChance 160
  DamageFactor "Crush", 10
  Monster
  +FLOORCLIP
  +AVOIDMELEE
  -COUNTKILL
  +AMBUSH
  +NEVERRESPAWN
  +QUICKTORETALIATE
  +NOBLOCKMONST
  +NOINFIGHTING
  +DONTHARMSPECIES
  +FRIENDLY
  -SOLID
  +ALWAYSFAST
  +QUICKTORETALIATE
  +MISSILEMORE
  +MISSILEEVENMORE
  +LOOKALLAROUND
  Obituary "%o stood in the line of fire for some reason."
  Species "Player"
  Tag "Marine"
  SeeSound "drpgmarinemale1/sight"
  PainSound "drpgmarinemale1/pain"
  DeathSound "drpgmarinemale1/death"
  ActiveSound "drpgmarinemale/active"
  AttackSound ""
  States
  {
  Spawn:
    TNT1 A 0 NoDelay ACS_NamedExecuteAlways("MonsterInit", 0, MF_NOPAYKILL | MF_NODROPS | MF_NAMEGEN | MF_RANKLOSS)
    TNT1 A 0 A_GiveInventory ("DRPGMarineSummonedToken", 1)
    PQST A 0 A_Look
    Goto FollowPlayer
  See:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineQuadShotgunMk2ShotCounter", 4, "RetreatReload")
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_JumpIfHealthLower (30, "SeeScared")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    TNT1 A 0 A_CheckSight("FollowPlayer")
    PQST AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    Goto See
  FollowPlayer:
    PQST AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfTargetInLOS("See")
    TNT1 A 0 A_CheckSight("CheckIfPlayerSee")
    Goto FollowPlayer
  CheckIfPlayerSee:
    TNT1 A 0
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 1)
    PQST AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_FastChase
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    TNT1 A 0 A_JumpIfCloser(1000, 2)
    TNT1 AAA 0
    Goto FollowPlayer
  Waits:
    TNT1 A 0 A_JumpIf(GetDistance(AAPTR_TARGET) > 200, "FollowPlayer")
    PQST E 1
    TNT1 A 0 A_ClearTarget
    TNT1 A 0 A_Jump(32, "Waits2")
    TNT1 A 0 A_Jump(32, "Waits3")
    TNT1 A 0 A_Jump(32, "See")
    PQST EEE 4 A_Stop
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PQST EEE 4 A_Stop
    TNT1 AAA 0 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PQST E 0 A_Look
    PQST E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits2:
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PQST EEE 6 A_Stop
    PQST EEE 6 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PQST A 0 A_Look
    PQST E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits3:
    TNT1 A 0
    TNT1 AAA 0
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PQST EEE 4 A_Stop
    PQST EEE 4 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PQST A 0 A_Look
    PQST E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  SeeScared:
    TNT1 A 0 A_JumpIfHealthLower (30, 1)
    Goto See
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 1)
    PQST AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PQST AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PQST AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PQST AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PQST AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PQST AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PQST AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PQST AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, "SeeScared")
    Goto Overwatch
  RetreatReload:
    TNT1 A 0 A_Jump(64, "TacticReload")
    PQST E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PQST AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "Reload")
    Goto RetreatReload
  Missile:
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    TNT1 A 0 A_Jump (64, "TacticStrafe")
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineQuadShotgunMk2ShotCounter", 4, "RetreatReload")
    PQST EEEEEEEEEEEE 1 A_FaceTarget (10)
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 A_MonsterRefire (0, "Overwatch")
    TNT1 A 0 A_GiveInventory ("DRPGMarineQuadShotgunMk2ShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/heavydoubleshotgun", CHAN_WEAPON, 1, 0, 0.7)
    PQST F 4 Bright A_CustomBulletAttack (16, 5, 12, random(3,7) * 3, "DRPGMarineBulletPuffSummoned", 0, CBAF_NORANDOM)
    PQST E 6
    TNT1 A 0 A_JumpIfHealthLower (30, 2)
    TNT1 A 0
    Goto Missile
  Overwatch:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineQuadShotgunMk2ShotCounter", 4, "Reload")
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    PQST E 4 A_FaceTarget
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    PQST E 4 A_FaceTarget
    TNT1 A 0 A_Jump (128, 1)
    Goto Overwatch
    TNT1 A 0
    Goto See
  Reload:
    PQST EE 7
    TNT1 A 0 A_PlaySound("weapons/heavydoubleshotgunopen", 7)
    PQST E 21
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_TakeInventory ("DRPGMarineQuadShotgunMk2ShotCounter", 4)
    TNT1 A 0 A_PlaySound("weapons/heavydoubleshotgunload", 7)
    PQST E 18
    TNT1 A 0 A_PlaySound("weapons/heavydoubleshotgunclose", 7)
    PQST E 5 A_FaceTarget
    Goto See
  TacticReload:
    PQST E 1 A_FaceTarget (0, 30, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-random(3,8))
    PQST E 1 A_FaceTarget
    PQST EE 7
    TNT1 A 0 A_PlaySound("weapons/heavydoubleshotgunopen", 7)
    PQST E 21
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_TakeInventory ("DRPGMarineQuadShotgunMk2ShotCounter", 4)
    TNT1 A 0 A_PlaySound("weapons/heavydoubleshotgunload", 7)
    PQST E 18
    TNT1 A 0 A_PlaySound("weapons/heavydoubleshotgunclose", 7)
    PQST E 5 A_FaceTarget
    Goto See
  TacticStrafe:
    TNT1 A 0 A_Jump(64, "TacticStrafeLeft1")
    TNT1 A 0 A_Jump(64, "TacticStrafeRight1")
    TNT1 A 0 A_Jump(32, "TacticStrafeLeft2")
    TNT1 A 0 A_Jump(32, "TacticStrafeRight2")
    TNT1 A 0 A_Jump(128, "TacticStrafeBack1")
    Goto TacticStrafeBack2
  TacticStrafeLeft1:
    TNT1 A 0 A_SetAngle(90 + angle)
    PQST AABBCCDD 1 A_Recoil(-1)
    PQST E 1 A_FaceTarget
    Goto Missile
  TacticStrafeLeft2:
    TNT1 A 0 A_SetAngle((90+random(-30,30)) + angle)
    PQST AABBCCDD 1 A_Recoil(-random(1,2))
    PQST E 1 A_FaceTarget
    Goto Missile
  TacticStrafeRight1:
    TNT1 A 0 A_SetAngle(270 + angle)
    PQST AABBCCDD 1 A_Recoil(-1)
    PQST E 1 A_FaceTarget
    Goto Missile
  TacticStrafeRight2:
    TNT1 A 0 A_SetAngle((270+random(-30,30)) + angle)
    PQST AABBCCDD 1 A_Recoil(-random(1,2))
    PQST E 1 A_FaceTarget
    Goto Missile
  TacticStrafeBack1:
    PQST E 1 A_FaceTarget
    PQST AABBCCDD 1 A_Recoil(-1)
    PQST E 1 A_FaceTarget
    Goto Missile
  TacticStrafeBack2:
    PQST E 1 A_FaceTarget
    PQST AABBCCDD 1 A_Recoil(-random(1,2))
    PQST E 1 A_FaceTarget
    Goto Missile
  TacticStrafeBack3:
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 ThrustThing(angle*256/360+128, 8, 0, 0)
    TNT1 A 0 ThrustThingZ(0, 4, 0, 1)
    Goto See
  Pain:
    PQST G 3
    PQST G 3 A_Pain
    TNT1 A 0 A_JumpIfCloser (64, 1)
    Goto See
    TNT1 A 0 A_Jump(32, "TacticStrafe")
    TNT1 A 0 A_Jump(32, "TacticStrafeBack3")
    Goto See
  Death:
    PQST H 4
    PQST I 4 A_Scream
    PQST J 4 A_NoBlocking
    PQST K 4
    TNT1 A 0 A_SpawnItem ("DRPGBodyThud", 0, 0, 0, 0)
    PQST LM 4
    PQST N -1
    Stop
  XDeath:
    PQST O 4
    PQST P 4 A_XScream
    PQST Q 4 A_NoBlocking
    TNT1 A 0 A_SpawnItem ("DRPGGibThud", 0, 0, 0, 0)
    PQST RSTUV 4
    PQST W -1
    Stop
  Crush:
    TNT1 A 1 A_SpawnItem("DRPGCrushedMarine",0,0,0,0)
    Stop
  }
}

ACTOR DRPGMarineChaingunSummoned2
{
  Health 225
  GibHealth -50
  Radius 20
  Height 56
  Speed 6
  PainChance 192
  DamageFactor "Crush", 10
  Monster
  +FLOORCLIP
  +AVOIDMELEE
  -COUNTKILL
  +AMBUSH
  +NEVERRESPAWN
  +QUICKTORETALIATE
  +NOBLOCKMONST
  +NOINFIGHTING
  +DONTHARMSPECIES
  +FRIENDLY
  -SOLID
  +ALWAYSFAST
  +QUICKTORETALIATE
  +MISSILEMORE
  +MISSILEEVENMORE
  +LOOKALLAROUND
  Obituary "%o stood in the line of fire for some reason."
  Species "Player"
  Tag "Marine"
  SeeSound "drpgmarinemale3/sight"
  PainSound "drpgmarinemale3/pain"
  DeathSound "drpgmarinemale3/death"
  ActiveSound "drpgmarinemale/active"
  AttackSound ""
  States
  {
  Spawn:
    TNT1 A 0 NoDelay ACS_NamedExecuteAlways("MonsterInit", 0, MF_NOPAYKILL | MF_NODROPS | MF_NAMEGEN | MF_RANKLOSS)
    TNT1 A 0 A_GiveInventory ("DRPGMarineSummonedToken", 1)
    PL42 A 0 A_Look
    Goto FollowPlayer
  See:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineMinigunShotCounter", 200, "RetreatReload")
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_JumpIfHealthLower (30, "SeeScared")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    TNT1 A 0 A_CheckSight("FollowPlayer")
    PL42 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    Goto See
  FollowPlayer:
    PL42 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfTargetInLOS("See")
    TNT1 A 0 A_CheckSight("CheckIfPlayerSee")
    Goto FollowPlayer
  CheckIfPlayerSee:
    TNT1 A 0
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 1)
    PL42 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_FastChase
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    TNT1 A 0 A_JumpIfCloser(1000, 2)
    TNT1 AAA 0
    Goto FollowPlayer
  Waits:
    TNT1 A 0 A_JumpIf(GetDistance(AAPTR_TARGET) > 200, "FollowPlayer")
    PL42 E 1
    TNT1 A 0 A_ClearTarget
    TNT1 A 0 A_Jump(32, "Waits2")
    TNT1 A 0 A_Jump(32, "Waits3")
    TNT1 A 0 A_Jump(32, "See")
    PL42 EEE 4 A_Stop
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PL42 EEE 4 A_Stop
    TNT1 AAA 0 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PL42 E 0 A_Look
    PL42 E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits2:
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PL42 EEE 6 A_Stop
    PL42 EEE 6 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PL42 A 0 A_Look
    PL42 E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits3:
    TNT1 A 0
    TNT1 AAA 0
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PL42 EEE 4 A_Stop
    PL42 EEE 4 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PL42 A 0 A_Look
    PL42 E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  SeeScared:
    TNT1 A 0 A_JumpIfHealthLower (30, 1)
    Goto See
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 1)
    PL42 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PL42 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PL42 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PL42 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PL42 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PL42 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PL42 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PL42 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, "SeeScared")
    Goto Overwatch
  RetreatReload:
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 1)
    TNT1 A 0 A_JumpIf(GetDistance(AAPTR_TARGET) > 64, "TacticReload")
    PL42 E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PL42 AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (128, 2)
    TNT1 A 0 A_Jump (32, "Reload")
    PL42 E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PL42 AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (96, 2)
    TNT1 A 0 A_Jump (64, "Reload")
    PL42 E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PL42 AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (64, 2)
    TNT1 A 0 A_Jump (96, "Reload")
    PL42 E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PL42 AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (32, 2)
    TNT1 A 0 A_Jump (128, "Reload")
    TNT1 A 0
    Goto RetreatReload+1
  MissileRestartFire:
    PL42 E 4 A_FaceTarget
    TNT1 A 0 A_Jump (256, 1,2,3,4,5,6)
    PL42 EEEE 4 A_FaceTarget
    Goto Missile
  Missile:
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    PL42 E 8 A_FaceTarget
    TNT1 A 0 A_PlaySound("rlmonsters/chaingunwindup", 7)
    PL42 EEEE 4 A_FaceTarget
    Goto MissileMain
  MissileMain:
    TNT1 A 0 A_Jump (4, "TacticStrafe")
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineMinigunShotCounter", 200, "MissileEnd")
    TNT1 A 0 A_GiveInventory ("DRPGMarineMinigunShotCounter", 1)
    TNT1 A 0 A_PlaySound("rlmonsters/minigun", CHAN_WEAPON, 1, 0, 0.5)
    TNT1 A 0 A_PlaySound("rlmonsters/minigun", CHAN_ITEM, 0.05, 0, 0.20)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineChaingunStateCounter", 1, "MissileAlt")
    TNT1 A 0 A_GiveInventory ("DRPGMarineChaingunStateCounter", 1)
    PL42 F 1 Bright A_CustomBulletAttack (12, 4, 1, random(1,3) * 5, "DRPGMarineBulletPuffSummoned", 0, CBAF_NORANDOM)
    PL42 E 0 A_MonsterRefire(2, "Overwatch")
    Goto MissileMain
  MissileAlt:
    TNT1 A 0 A_TakeInventory ("DRPGMarineChaingunStateCounter", 1)
    PL42 E 1 Bright A_CustomBulletAttack (12, 4, 1, random(1,3) * 5, "DRPGMarineBulletPuffSummoned", 0, CBAF_NORANDOM)
    PL42 E 0 A_MonsterRefire(2, "Overwatch")
    Goto MissileMain
  MissileEnd:
    TNT1 A 0 A_PlaySound("rlmonsters/chaingunwinddown", 7)
    PL42 EEEEE 4
    PL42 E 2
    Goto See
  Reload:
    PL42 EEE 5
    TNT1 A 0 A_PlaySound("rlmonsters/pistolreloadout", 7)
    PL42 EE 5
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_PlaySound("rlmonsters/chaingunload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineMinigunShotCounter", 200)
    PL42 EEEEE 5
    TNT1 A 0 A_PlaySound("rlmonsters/chaingunwinddown", 6)
    PL42 EE 5 A_FaceTarget
    Goto See
  TacticReload:
    TNT1 A 0 A_Jump(128, 3)
    PL42 E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-random(3,8))
    PL42 E 1 A_FaceTarget
    PL42 EEE 5
    TNT1 A 0 A_PlaySound("rlmonsters/pistolreloadout", 7)
    PL42 EE 5
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_PlaySound("rlmonsters/chaingunload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineMinigunShotCounter", 200)
    PL42 EEEEE 5
    TNT1 A 0 A_PlaySound("rlmonsters/chaingunwinddown", 6)
    PL42 EE 5 A_FaceTarget
    Goto See
  TacticStrafe:
    TNT1 A 0 A_Jump(64, "TacticStrafeLeft1")
    TNT1 A 0 A_Jump(64, "TacticStrafeRight1")
    TNT1 A 0 A_Jump(32, "TacticStrafeLeft2")
    TNT1 A 0 A_Jump(32, "TacticStrafeRight2")
    TNT1 A 0 A_Jump(128, "TacticStrafeBack1")
    Goto TacticStrafeBack2
  TacticStrafeLeft1:
    TNT1 A 0 A_SetAngle(90 + angle)
    PL42 AABBCCDD 1 A_Recoil(-1)
    PL42 E 1 A_FaceTarget
    Goto MissileMain
  TacticStrafeLeft2:
    TNT1 A 0 A_SetAngle((90+random(-30,30)) + angle)
    PL42 AABBCCDD 1 A_Recoil(-random(1,2))
    PL42 E 1 A_FaceTarget
    Goto MissileMain
  TacticStrafeRight1:
    TNT1 A 0 A_SetAngle(270 + angle)
    PL42 AABBCCDD 1 A_Recoil(-1)
    PL42 E 1 A_FaceTarget
    Goto MissileMain
  TacticStrafeRight2:
    TNT1 A 0 A_SetAngle((270+random(-30,30)) + angle)
    PL42 AABBCCDD 1 A_Recoil(-random(1,2))
    PL42 E 1 A_FaceTarget
    Goto MissileMain
  TacticStrafeBack1:
    PL42 E 1 A_FaceTarget
    PL42 AABBCCDD 1 A_Recoil(-1)
    PL42 E 1 A_FaceTarget
    Goto MissileMain
  TacticStrafeBack2:
    PL42 E 1 A_FaceTarget
    PL42 AABBCCDD 1 A_Recoil(-random(1,2))
    PL42 E 1 A_FaceTarget
    Goto MissileMain
  TacticStrafeBack3:
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 ThrustThing(angle*256/360+128, 8, 0, 0)
    TNT1 A 0 ThrustThingZ(0, 4, 0, 1)
    Goto See
  Overwatch:
    TNT1 A 0 A_PlaySound("rlmonsters/chaingunspin", 7, 1, 0, 1.2)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineMinigunShotCounter", 200, "Reload")
    TNT1 A 0 A_Chase ("", "MissileRestartFire", CHF_DONTMOVE)
    PL42 E 5 A_FaceTarget (10)
    TNT1 A 0 A_Chase ("", "MissileRestartFire", CHF_DONTMOVE)
    PL42 E 5 A_FaceTarget (10)
    TNT1 A 0 A_Jump (32, "MissileEnd")
    Goto Overwatch
    TNT1 A 0
    Goto See
  Pain:
    PL42 G 3
    PL42 G 3 A_Pain
    TNT1 A 0 A_JumpIfCloser (64, 1)
    Goto See
    TNT1 A 0 A_Jump(32, "TacticStrafe")
    TNT1 A 0 A_Jump(32, "TacticStrafeBack3")
    Goto See
  Death:
    PL42 H 4
    PL42 I 4 A_Scream
    PL42 J 4 A_NoBlocking
    PL42 K 4
    TNT1 A 0 A_SpawnItem ("DRPGBodyThud", 0, 0, 0, 0)
    PL42 LM 4
    PL42 N -1
    Stop
  XDeath:
    PL42 O 4
    PL42 P 4 A_XScream
    PL42 Q 4 A_NoBlocking
    TNT1 A 0 A_SpawnItem ("DRPGGibThud", 0, 0, 0, 0)
    PL42 RSTUV 4
    PL42 W -1
    Stop
  Crush:
    TNT1 A 1 A_SpawnItem("DRPGCrushedMarine",0,0,0,0)
    Stop
  }
}

ACTOR DRPGMarineChaingunSummoned3
{
  Health 250
  GibHealth -50
  Radius 20
  Height 56
  Speed 6
  PainChance 160
  DamageFactor "Crush", 10
  Monster
  +FLOORCLIP
  +AVOIDMELEE
  -COUNTKILL
  +AMBUSH
  +NEVERRESPAWN
  +QUICKTORETALIATE
  +NOBLOCKMONST
  +NOINFIGHTING
  +DONTHARMSPECIES
  +FRIENDLY
  -SOLID
  +ALWAYSFAST
  +QUICKTORETALIATE
  +MISSILEMORE
  +MISSILEEVENMORE
  +LOOKALLAROUND
  Obituary "%o stood in the line of fire for some reason."
  Species "Player"
  Tag "Marine"
  SeeSound "drpgmarinemale3/sight"
  PainSound "drpgmarinemale3/pain"
  DeathSound "drpgmarinemale3/death"
  ActiveSound "drpgmarinemale/active"
  AttackSound ""
  States
  {
  Spawn:
    TNT1 A 0 NoDelay ACS_NamedExecuteAlways("MonsterInit", 0, MF_NOPAYKILL | MF_NODROPS | MF_NAMEGEN | MF_RANKLOSS)
    TNT1 A 0 A_GiveInventory ("DRPGMarineSummonedToken", 1)
    PDEV A 0 A_Look
    Goto FollowPlayer
  See:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineMinigunShotCounter", 200, "RetreatReload")
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_JumpIfHealthLower (30, "SeeScared")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    TNT1 A 0 A_CheckSight("FollowPlayer")
    PDEV AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    Goto See
  FollowPlayer:
    PDEV AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfTargetInLOS("See")
    TNT1 A 0 A_CheckSight("CheckIfPlayerSee")
    Goto FollowPlayer
  CheckIfPlayerSee:
    TNT1 A 0
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 1)
    PDEV AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_FastChase
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    TNT1 A 0 A_JumpIfCloser(1000, 2)
    TNT1 AAA 0
    Goto FollowPlayer
  Waits:
    TNT1 A 0 A_JumpIf(GetDistance(AAPTR_TARGET) > 200, "FollowPlayer")
    PDEV E 1
    TNT1 A 0 A_ClearTarget
    TNT1 A 0 A_Jump(32, "Waits2")
    TNT1 A 0 A_Jump(32, "Waits3")
    TNT1 A 0 A_Jump(32, "See")
    PDEV EEE 4 A_Stop
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PDEV EEE 4 A_Stop
    TNT1 AAA 0 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PDEV E 0 A_Look
    PDEV E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits2:
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PDEV EEE 6 A_Stop
    PDEV EEE 6 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PDEV A 0 A_Look
    PDEV E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits3:
    TNT1 A 0
    TNT1 AAA 0
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PDEV EEE 4 A_Stop
    PDEV EEE 4 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PDEV A 0 A_Look
    PDEV E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  SeeScared:
    TNT1 A 0 A_JumpIfHealthLower (30, 1)
    Goto See
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 1)
    PDEV AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PDEV AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PDEV AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PDEV AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PDEV AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PDEV AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PDEV AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PDEV AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, "SeeScared")
    Goto Overwatch
  RetreatReload:
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 1)
    TNT1 A 0 A_JumpIf(GetDistance(AAPTR_TARGET) > 64, "TacticReload")
    PDEV E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PDEV AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (128, 2)
    TNT1 A 0 A_Jump (32, "Reload")
    PDEV E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PDEV AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (96, 2)
    TNT1 A 0 A_Jump (64, "Reload")
    PDEV E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PDEV AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (64, 2)
    TNT1 A 0 A_Jump (96, "Reload")
    PDEV E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PDEV AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (32, 2)
    TNT1 A 0 A_Jump (128, "Reload")
    TNT1 A 0
    Goto RetreatReload+1
  MissileRestartFire:
    PDEV E 4 A_FaceTarget
    TNT1 A 0 A_Jump (256, 1,2,3,4,5,6)
    PDEV EEEE 4 A_FaceTarget
    Goto Missile
  Missile:
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    PDEV E 8 A_FaceTarget
    TNT1 A 0 A_PlaySound("weapons/laserminigunstart", 7, 0.6, 0, 1.5)
    PDEV EEEE 4 A_FaceTarget
    Goto MissileMain
  MissileMain:
    PDEV EE 1 A_FaceTarget
    TNT1 A 0 A_Jump (8, "TacticStrafe")
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineMinigunShotCounter", 200, "MissileEnd")
    TNT1 A 0 A_GiveInventory ("DRPGMarineMinigunShotCounter", 1)
    TNT1 A 0 A_PlaySound("weapons/laserminigun", CHAN_WEAPON, 1, 0, 0.7)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineChaingunStateCounter", 1, "MissileAlt")
    TNT1 A 0 A_GiveInventory ("DRPGMarineChaingunStateCounter", 1)
    PDEV F 1 Bright A_CustomBulletAttack (10, 4, 1, random(3,5) * 5, "RLLaserPuff", 0, CBAF_NORANDOM)
    PDEV E 0 A_MonsterRefire(2, "Overwatch")
    Goto MissileMain
  MissileAlt:
    TNT1 A 0 A_TakeInventory ("DRPGMarineChaingunStateCounter", 1)
    PDEV E 1 Bright A_CustomBulletAttack (10, 4, 1, random(3,5) * 5, "RLLaserPuff", 0, CBAF_NORANDOM)
    PDEV E 0 A_MonsterRefire(2, "Overwatch")
    Goto MissileMain
  MissileEnd:
    TNT1 A 0 A_PlaySound("weapons/laserminigunstop", 7, 0.6, 0, 1.5)
    PDEV EEEEE 4
    PDEV E 2
    Goto See
  Reload:
    PDEV EEE 5
    TNT1 A 0 A_PlaySound("drpgmarines/bfg9000unload", 7)
    PDEV EEE 5
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_PlaySound("drpgmarines/bfg9000load", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineMinigunShotCounter", 200)
    PDEV E 5 A_FaceTarget
    Goto See
  TacticReload:
    TNT1 A 0 A_Jump(128, 3)
    PDEV E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-random(3,8))
    PDEV E 1 A_FaceTarget
    PDEV EEE 5
    TNT1 A 0 A_PlaySound("drpgmarines/bfg9000unload", 7)
    PDEV EEE 5
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_PlaySound("drpgmarines/bfg9000load", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineMinigunShotCounter", 200)
    PDEV E 5 A_FaceTarget
    Goto See
  TacticStrafe:
    TNT1 A 0 A_Jump(64, "TacticStrafeLeft1")
    TNT1 A 0 A_Jump(64, "TacticStrafeRight1")
    TNT1 A 0 A_Jump(32, "TacticStrafeLeft2")
    TNT1 A 0 A_Jump(32, "TacticStrafeRight2")
    TNT1 A 0 A_Jump(128, "TacticStrafeBack1")
    Goto TacticStrafeBack2
  TacticStrafeLeft1:
    TNT1 A 0 A_SetAngle(90 + angle)
    PDEV AABBCCDD 1 A_Recoil(-1)
    PDEV E 1 A_FaceTarget
    Goto MissileMain
  TacticStrafeLeft2:
    TNT1 A 0 A_SetAngle((90+random(-30,30)) + angle)
    PDEV AABBCCDD 1 A_Recoil(-random(1,2))
    PDEV E 1 A_FaceTarget
    Goto MissileMain
  TacticStrafeRight1:
    TNT1 A 0 A_SetAngle(270 + angle)
    PDEV AABBCCDD 1 A_Recoil(-1)
    PDEV E 1 A_FaceTarget
    Goto MissileMain
  TacticStrafeRight2:
    TNT1 A 0 A_SetAngle((270+random(-30,30)) + angle)
    PDEV AABBCCDD 1 A_Recoil(-random(1,2))
    PDEV E 1 A_FaceTarget
    Goto MissileMain
  TacticStrafeBack1:
    PDEV E 1 A_FaceTarget
    PDEV AABBCCDD 1 A_Recoil(-1)
    PDEV E 1 A_FaceTarget
    Goto MissileMain
  TacticStrafeBack2:
    PDEV E 1 A_FaceTarget
    PDEV AABBCCDD 1 A_Recoil(-random(1,2))
    PDEV E 1 A_FaceTarget
    Goto MissileMain
  TacticStrafeBack3:
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 ThrustThing(angle*256/360+128, 8, 0, 0)
    TNT1 A 0 ThrustThingZ(0, 4, 0, 1)
    Goto See
  Overwatch:
    TNT1 A 0 A_PlaySound("weapons/laserminigunloop", 7, 0.6, 0, 1.5)
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineMinigunShotCounter", 200, "Reload")
    TNT1 A 0 A_Chase ("", "MissileRestartFire", CHF_DONTMOVE)
    PDEV E 5 A_FaceTarget (10)
    TNT1 A 0 A_Chase ("", "MissileRestartFire", CHF_DONTMOVE)
    PDEV E 5 A_FaceTarget (10)
    TNT1 A 0 A_Jump (32, "MissileEnd")
    Goto Overwatch
    TNT1 A 0
    Goto See
  Pain:
    PDEV G 3
    PDEV G 3 A_Pain
    TNT1 A 0 A_JumpIfCloser (64, 1)
    Goto See
    TNT1 A 0 A_Jump(32, "TacticStrafe")
    TNT1 A 0 A_Jump(32, "TacticStrafeBack3")
    Goto See
  Death:
    PDEV H 4
    PDEV I 4 A_Scream
    PDEV J 4 A_NoBlocking
    PDEV K 4
    TNT1 A 0 A_SpawnItem ("DRPGBodyThud", 0, 0, 0, 0)
    PDEV LM 4
    PDEV N -1
    Stop
  XDeath:
    PDEV O 4
    PDEV P 4 A_XScream
    PDEV Q 4 A_NoBlocking
    TNT1 A 0 A_SpawnItem ("DRPGGibThud", 0, 0, 0, 0)
    PDEV RSTUV 4
    PDEV W -1
    Stop
  Crush:
    TNT1 A 1 A_SpawnItem("DRPGCrushedMarine",0,0,0,0)
    Stop
  }
}

ACTOR DRPGMarineRocketLauncherSummoned2
{
  Health 250
  GibHealth -50
  Radius 20
  Height 56
  Speed 7
  PainChance 192
  DamageFactor "Crush", 10
  Monster
  +FLOORCLIP
  +AVOIDMELEE
  -COUNTKILL
  +AMBUSH
  +NEVERRESPAWN
  +QUICKTORETALIATE
  +NOBLOCKMONST
  +NOINFIGHTING
  +DONTHARMSPECIES
  +FRIENDLY
  -SOLID
  +ALWAYSFAST
  +QUICKTORETALIATE
  +MISSILEMORE
  +MISSILEEVENMORE
  +LOOKALLAROUND
  Obituary "%o stood in the line of fire for some reason."
  Species "Player"
  Tag "Marine"
  DamageFactor "Fire", 0.5
  SeeSound "drpgmarinemale1/sight"
  PainSound "drpgmarinemale1/pain"
  DeathSound "drpgmarinemale1/death"
  ActiveSound "drpgmarinemale/active"
  AttackSound ""
  States
  {
  Spawn:
    TNT1 A 0 NoDelay ACS_NamedExecuteAlways("MonsterInit", 0, MF_NOPAYKILL | MF_NODROPS | MF_NAMEGEN | MF_RANKLOSS)
    TNT1 A 0 A_GiveInventory ("DRPGMarineSummonedToken", 1)
    PBAZ A 0 A_Look
    Goto FollowPlayer
  See:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineShotgunShotCounter", 1, "RetreatReload")
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_JumpIfHealthLower (30, "SeeScared")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    TNT1 A 0 A_CheckSight("FollowPlayer")
    PBAZ AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    Goto See
  FollowPlayer:
    PBAZ AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfTargetInLOS("See")
    TNT1 A 0 A_CheckSight("CheckIfPlayerSee")
    Goto FollowPlayer
  CheckIfPlayerSee:
    TNT1 A 0
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 1)
    PBAZ AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_FastChase
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    TNT1 A 0 A_JumpIfCloser(1000, 2)
    TNT1 AAA 0
    Goto FollowPlayer
  Waits:
    TNT1 A 0 A_JumpIf(GetDistance(AAPTR_TARGET) > 200, "FollowPlayer")
    PBAZ E 1
    TNT1 A 0 A_ClearTarget
    TNT1 A 0 A_Jump(32, "Waits2")
    TNT1 A 0 A_Jump(32, "Waits3")
    TNT1 A 0 A_Jump(32, "See")
    PBAZ EEE 4 A_Stop
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PBAZ EEE 4 A_Stop
    TNT1 AAA 0 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PBAZ E 0 A_Look
    PBAZ E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits2:
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PBAZ EEE 6 A_Stop
    PBAZ EEE 6 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PBAZ A 0 A_Look
    PBAZ E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits3:
    TNT1 A 0
    TNT1 AAA 0
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PBAZ EEE 4 A_Stop
    PBAZ EEE 4 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PBAZ A 0 A_Look
    PBAZ E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  SeeScared:
    TNT1 A 0 A_JumpIfHealthLower (30, 1)
    Goto See
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 1)
    PBAZ AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PBAZ AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PBAZ AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PBAZ AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PBAZ AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PBAZ AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PBAZ AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PBAZ AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, "SeeScared")
    Goto Overwatch
  RetreatReload:
    TNT1 A 0 A_Jump(64, "TacticReload")
    PBAZ E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PBAZ AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "Reload")
    Goto RetreatReload
  Missile:
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    TNT1 A 0 A_Jump (64, "TacticStrafe")
    TNT1 A 0 A_Jump (128, "TacticStrafeLeft1")
    TNT1 A 0 A_Jump (128, "TacticStrafeRight1")
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineShotgunShotCounter", 1, "RetreatReload")
    TNT1 A 0 A_JumpIfCloser (160, "JumpBack")
    PBAZ EEEEEEEEEEEEEEEE 1 A_FaceTarget (10)
  MissileFuckYou:
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 A_MonsterRefire (0, "Overwatch")
    TNT1 A 0 A_GiveInventory ("DRPGMarineShotgunShotCounter", 1)
    TNT1 A 0 A_TakeInventory ("DRPGMarineJumpCounter", 4)
    PBAZ F 10 Bright A_CustomMissile ("RLMissileSummoned", 48)
    PBAZ E 8
    TNT1 A 0 A_JumpIfHealthLower (30, 2)
    TNT1 A 0 A_Jump (64, "RetreatReload")
    TNT1 A 0
    Goto Missile
  JumpBack:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineJumpCounter", 4, "MissileFuckYou")
    TNT1 A 0 A_GiveInventory ("DRPGMarineJumpCounter", 1)
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 ThrustThing(angle*256/360+128, 8, 0, 0)
    TNT1 A 0 ThrustThingZ(0, 4, 0, 1)
    PBAZ EEEEEEEEE 1 A_FaceTarget (10)
    Goto Missile
  Overwatch:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineShotgunShotCounter", 1, "Reload")
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    PBAZ E 4 A_FaceTarget
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    PBAZ E 4 A_FaceTarget
    TNT1 A 0 A_Jump (32, 1)
    Goto Overwatch
    TNT1 A 0
    Goto See
  Reload:
    PBAZ E 45
    TNT1 A 0 A_PlaySound("drpgmarines/rocketlauncherload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineShotgunShotCounter", 1)
    PBAZ E 19
    Goto See
  TacticReload:
    PBAZ E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-random(3,8))
    PBAZ E 1 A_FaceTarget
    PBAZ E 45
    TNT1 A 0 A_PlaySound("drpgmarines/rocketlauncherload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineShotgunShotCounter", 1)
    PBAZ E 19
    Goto See
  TacticStrafe:
    TNT1 A 0 A_Jump(64, "TacticStrafeLeft1")
    TNT1 A 0 A_Jump(64, "TacticStrafeRight1")
    TNT1 A 0 A_Jump(32, "TacticStrafeLeft2")
    TNT1 A 0 A_Jump(32, "TacticStrafeRight2")
    TNT1 A 0 A_Jump(128, "TacticStrafeBack1")
    Goto TacticStrafeBack2
  TacticStrafeLeft1:
    TNT1 A 0 A_SetAngle(90 + angle)
    PBAZ AABBCCDD 1 A_Recoil(-1)
    PBAZ E 1 A_FaceTarget
    Goto Missile+3
  TacticStrafeLeft2:
    TNT1 A 0 A_SetAngle((90+random(-30,30)) + angle)
    PBAZ AABBCCDD 1 A_Recoil(-random(1,2))
    PBAZ E 1 A_FaceTarget
    Goto Missile+3
  TacticStrafeRight1:
    TNT1 A 0 A_SetAngle(270 + angle)
    PBAZ AABBCCDD 1 A_Recoil(-1)
    PBAZ E 1 A_FaceTarget
    Goto Missile+3
  TacticStrafeRight2:
    TNT1 A 0 A_SetAngle((270+random(-30,30)) + angle)
    PBAZ AABBCCDD 1 A_Recoil(-random(1,2))
    PBAZ E 1 A_FaceTarget
    Goto Missile+3
  TacticStrafeBack1:
    PBAZ E 1 A_FaceTarget
    PBAZ AABBCCDD 1 A_Recoil(-1)
    PBAZ E 1 A_FaceTarget
    Goto Missile+3
  TacticStrafeBack2:
    PBAZ E 1 A_FaceTarget
    PBAZ AABBCCDD 1 A_Recoil(-random(1,2))
    PBAZ E 1 A_FaceTarget
    Goto Missile+3
  TacticStrafeBack3:
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 ThrustThing(angle*256/360+128, 8, 0, 0)
    TNT1 A 0 ThrustThingZ(0, 4, 0, 1)
    Goto See
  Pain:
    PBAZ G 3
    PBAZ G 3 A_Pain
    TNT1 A 0 A_JumpIfCloser (64, 1)
    Goto See
    TNT1 A 0 A_Jump(32, "TacticStrafe")
    TNT1 A 0 A_Jump(32, "TacticStrafeBack3")
    Goto See
  Death:
    PBAZ H 4
    PBAZ I 4 A_Scream
    PBAZ J 4 A_NoBlocking
    PBAZ K 4
    TNT1 A 0 A_SpawnItem ("DRPGBodyThud", 0, 0, 0, 0)
    PBAZ LM 4
    PBAZ N -1
    Stop
  XDeath:
    PBAZ O 4
    PBAZ P 4 A_XScream
    PBAZ Q 4 A_NoBlocking
    TNT1 A 0 A_SpawnItem ("DRPGGibThud", 0, 0, 0, 0)
    PBAZ RSTUV 4
    PBAZ W -1
    Stop
  Crush:
    TNT1 A 1 A_SpawnItem("DRPGCrushedMarine",0,0,0,0)
    Stop
  }
}

ACTOR DRPGMarineRocketLauncherSummoned3
{
  Health 275
  GibHealth -50
  Radius 20
  Height 56
  Speed 7
  PainChance 160
  DamageFactor "Crush", 10
  Monster
  +FLOORCLIP
  +AVOIDMELEE
  -COUNTKILL
  +AMBUSH
  +NEVERRESPAWN
  +QUICKTORETALIATE
  +NOBLOCKMONST
  +NOINFIGHTING
  +DONTHARMSPECIES
  +FRIENDLY
  -SOLID
  +ALWAYSFAST
  +QUICKTORETALIATE
  +MISSILEMORE
  +MISSILEEVENMORE
  +LOOKALLAROUND
  Obituary "%o stood in the line of fire for some reason."
  Species "Player"
  Tag "Marine"
  DamageFactor "Fire", 0.5
  SeeSound "drpgmarinemale1/sight"
  PainSound "drpgmarinemale1/pain"
  DeathSound "drpgmarinemale1/death"
  ActiveSound "drpgmarinemale/active"
  AttackSound ""
  States
  {
  Spawn:
    TNT1 A 0 NoDelay ACS_NamedExecuteAlways("MonsterInit", 0, MF_NOPAYKILL | MF_NODROPS | MF_NAMEGEN | MF_RANKLOSS)
    TNT1 A 0 A_GiveInventory ("DRPGMarineSummonedToken", 1)
    PRDM A 0 A_Look
    Goto FollowPlayer
  See:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineShotgunShotCounter", 1, "RetreatReload")
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_JumpIfHealthLower (30, "SeeScared")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    TNT1 A 0 A_CheckSight("FollowPlayer")
    PRDM AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    Goto See
  FollowPlayer:
    PRDM AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfTargetInLOS("See")
    TNT1 A 0 A_CheckSight("CheckIfPlayerSee")
    Goto FollowPlayer
  CheckIfPlayerSee:
    TNT1 A 0
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 1)
    PRDM AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_FastChase
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    TNT1 A 0 A_JumpIfCloser(1000, 2)
    TNT1 AAA 0
    Goto FollowPlayer
  Waits:
    TNT1 A 0 A_JumpIf(GetDistance(AAPTR_TARGET) > 200, "FollowPlayer")
    PRDM E 1
    TNT1 A 0 A_ClearTarget
    TNT1 A 0 A_Jump(32, "Waits2")
    TNT1 A 0 A_Jump(32, "Waits3")
    TNT1 A 0 A_Jump(32, "See")
    PRDM EEE 4 A_Stop
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PRDM EEE 4 A_Stop
    TNT1 AAA 0 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PRDM E 0 A_Look
    PRDM E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits2:
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PRDM EEE 6 A_Stop
    PRDM EEE 6 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PRDM A 0 A_Look
    PRDM E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits3:
    TNT1 A 0
    TNT1 AAA 0
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PRDM EEE 4 A_Stop
    PRDM EEE 4 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PRDM A 0 A_Look
    PRDM E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  SeeScared:
    TNT1 A 0 A_JumpIfHealthLower (30, 1)
    Goto See
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 1)
    PRDM AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PRDM AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PRDM AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PRDM AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PRDM AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PRDM AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PRDM AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PRDM AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, "SeeScared")
    Goto Overwatch
  RetreatReload:
    TNT1 A 0 A_Jump(64, "TacticReload")
    PRDM E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PRDM AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "Reload")
    Goto RetreatReload
  Missile:
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    TNT1 A 0 A_Jump (64, "TacticStrafe")
    TNT1 A 0 A_Jump (128, "TacticStrafeLeft1")
    TNT1 A 0 A_Jump (128, "TacticStrafeRight1")
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineShotgunShotCounter", 1, "RetreatReload")
    TNT1 A 0 A_JumpIfCloser (160, "JumpBack")
    PRDM EEEEEEEEEEEEEEEE 1 A_FaceTarget (10)
  MissileFuckYou:
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 A_MonsterRefire (0, "Overwatch")
    TNT1 A 0 A_GiveInventory ("DRPGMarineShotgunShotCounter", 1)
    TNT1 A 0 A_TakeInventory ("DRPGMarineJumpCounter", 4)
    PRDM F 10 Bright A_CustomMissile ("RLClusterBombSummoned", 48)
    PRDM E 8
    TNT1 A 0 A_JumpIfHealthLower (30, 2)
    TNT1 A 0 A_Jump (64, "RetreatReload")
    TNT1 A 0
    Goto Missile
  JumpBack:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineJumpCounter", 4, "MissileFuckYou")
    TNT1 A 0 A_GiveInventory ("DRPGMarineJumpCounter", 1)
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 ThrustThing(angle*256/360+128, 8, 0, 0)
    TNT1 A 0 ThrustThingZ(0, 4, 0, 1)
    PRDM EEEEEEEEE 1 A_FaceTarget (10)
    Goto Missile
  Overwatch:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineShotgunShotCounter", 1, "Reload")
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    PRDM E 4 A_FaceTarget
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    PRDM E 4 A_FaceTarget
    TNT1 A 0 A_Jump (32, 1)
    Goto Overwatch
    TNT1 A 0
    Goto See
  Reload:
    PRDM E 45
    TNT1 A 0 A_PlaySound("drpgmarines/rocketlauncherload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineShotgunShotCounter", 1)
    PRDM E 19
    Goto See
  TacticReload:
    PRDM E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-random(3,8))
    PRDM E 1 A_FaceTarget
    PRDM E 45
    TNT1 A 0 A_PlaySound("drpgmarines/rocketlauncherload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineShotgunShotCounter", 1)
    PRDM E 19
    Goto See
  TacticStrafe:
    TNT1 A 0 A_Jump(64, "TacticStrafeLeft1")
    TNT1 A 0 A_Jump(64, "TacticStrafeRight1")
    TNT1 A 0 A_Jump(32, "TacticStrafeLeft2")
    TNT1 A 0 A_Jump(32, "TacticStrafeRight2")
    TNT1 A 0 A_Jump(128, "TacticStrafeBack1")
    Goto TacticStrafeBack2
  TacticStrafeLeft1:
    TNT1 A 0 A_SetAngle(90 + angle)
    PRDM AABBCCDD 1 A_Recoil(-1)
    PRDM E 1 A_FaceTarget
    Goto Missile+3
  TacticStrafeLeft2:
    TNT1 A 0 A_SetAngle((90+random(-30,30)) + angle)
    PRDM AABBCCDD 1 A_Recoil(-random(1,2))
    PRDM E 1 A_FaceTarget
    Goto Missile+3
  TacticStrafeRight1:
    TNT1 A 0 A_SetAngle(270 + angle)
    PRDM AABBCCDD 1 A_Recoil(-1)
    PRDM E 1 A_FaceTarget
    Goto Missile+3
  TacticStrafeRight2:
    TNT1 A 0 A_SetAngle((270+random(-30,30)) + angle)
    PRDM AABBCCDD 1 A_Recoil(-random(1,2))
    PRDM E 1 A_FaceTarget
    Goto Missile+3
  TacticStrafeBack1:
    PRDM E 1 A_FaceTarget
    PRDM AABBCCDD 1 A_Recoil(-1)
    PRDM E 1 A_FaceTarget
    Goto Missile+3
  TacticStrafeBack2:
    PRDM E 1 A_FaceTarget
    PRDM AABBCCDD 1 A_Recoil(-random(1,2))
    PRDM E 1 A_FaceTarget
    Goto Missile+3
  TacticStrafeBack3:
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 ThrustThing(angle*256/360+128, 8, 0, 0)
    TNT1 A 0 ThrustThingZ(0, 4, 0, 1)
    Goto See
  Pain:
    PRDM G 3
    PRDM G 3 A_Pain
    TNT1 A 0 A_JumpIfCloser (64, 1)
    Goto See
    TNT1 A 0 A_Jump(32, "TacticStrafe")
    TNT1 A 0 A_Jump(32, "TacticStrafeBack3")
    Goto See
  Death:
    PRDM H 4
    PRDM I 4 A_Scream
    PRDM J 4 A_NoBlocking
    PRDM K 4
    TNT1 A 0 A_SpawnItem ("DRPGBodyThud", 0, 0, 0, 0)
    PRDM LM 4
    PRDM N -1
    Stop
  XDeath:
    PRDM O 4
    PRDM P 4 A_XScream
    PRDM Q 4 A_NoBlocking
    TNT1 A 0 A_SpawnItem ("DRPGGibThud", 0, 0, 0, 0)
    PRDM RSTUV 4
    PRDM W -1
    Stop
  Crush:
    TNT1 A 1 A_SpawnItem("DRPGCrushedMarine",0,0,0,0)
    Stop
  }
}

ACTOR DRPGMarinePlasmaRifleSummoned2
{
  Health 275
  GibHealth -50
  Radius 20
  Height 56
  Speed 6
  PainChance 192
  DamageFactor "Crush", 10
  DamageFactor "Plasma", 0.6
  Monster
  +FLOORCLIP
  +AVOIDMELEE
  -COUNTKILL
  +AMBUSH
  +NEVERRESPAWN
  +QUICKTORETALIATE
  +NOBLOCKMONST
  +NOINFIGHTING
  +DONTHARMSPECIES
  +FRIENDLY
  -SOLID
  +ALWAYSFAST
  +QUICKTORETALIATE
  +MISSILEMORE
  +MISSILEEVENMORE
  +LOOKALLAROUND
  Obituary "%o stood in the line of fire for some reason."
  Species "Player"
  Tag "Marine"
  SeeSound "drpgmarinemale3/sight"
  PainSound "drpgmarinemale3/pain"
  DeathSound "drpgmarinemale3/death"
  ActiveSound "drpgmarinemale/active"
  AttackSound ""
  States
  {
  Spawn:
    TNT1 A 0 NoDelay ACS_NamedExecuteAlways("MonsterInit", 0, MF_NOPAYKILL | MF_NODROPS | MF_NAMEGEN | MF_RANKLOSS)
    TNT1 A 0 A_GiveInventory ("DRPGMarineSummonedToken", 1)
    PRAI E 0 A_Look
    Goto FollowPlayer
  See:    
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineChaingunShotCounter", 40, "RetreatReload")
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_JumpIfHealthLower (30, "SeeScared")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_JumpIfTargetInLOS (2, 0)
    TNT1 A 0 A_JumpIfCloser (300, "Ambushing")
    PRAI AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    Goto See
  FollowPlayer:
    PRAI AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfTargetInLOS("See")
    TNT1 A 0 A_CheckSight("CheckIfPlayerSee")
    Goto FollowPlayer
  CheckIfPlayerSee:
    TNT1 A 0
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 1)
    PRAI AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_FastChase
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    TNT1 A 0 A_JumpIfCloser(1000, 2)
    TNT1 AAA 0
    Goto FollowPlayer
  Waits:
    TNT1 A 0 A_JumpIf(GetDistance(AAPTR_TARGET) > 200, "FollowPlayer")
    PRAI E 1
    TNT1 A 0 A_ClearTarget
    TNT1 A 0 A_Jump(32, "Waits2")
    TNT1 A 0 A_Jump(32, "Waits3")
    TNT1 A 0 A_Jump(32, "See")
    PRAI EEE 4 A_Stop
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PRAI EEE 4 A_Stop
    TNT1 AAA 0 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PRAI E 0 A_Look
    PRAI E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits2:
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PRAI EEE 6 A_Stop
    PRAI EEE 6 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PRAI A 0 A_Look
    PRAI E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits3:
    TNT1 A 0
    TNT1 AAA 0
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PRAI EEE 4 A_Stop
    PRAI EEE 4 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PRAI A 0 A_Look
    PRAI E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  SeeScared:
    TNT1 A 0 A_JumpIfHealthLower (30, 1)
    Goto See
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 1)
    PRAI AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PRAI AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PRAI AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PRAI AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PRAI AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PRAI AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PRAI AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PRAI AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, "SeeScared")
    Goto Overwatch
  RetreatReload:
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 1)
    TNT1 A 0 A_JumpIf(GetDistance(AAPTR_TARGET) > 64, "TacticReload")
    PRAI E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PRAI AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (128, 2)
    TNT1 A 0 A_Jump (32, "Reload")
    PRAI E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PRAI AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (96, 2)
    TNT1 A 0 A_Jump (64, "Reload")
    PRAI E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PRAI AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (64, 2)
    TNT1 A 0 A_Jump (96, "Reload")
    PRAI E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PRAI AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (32, 2)
    TNT1 A 0 A_Jump (128, "Reload")
    TNT1 A 0
    Goto RetreatReload+1
  Missile:
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    TNT1 A 0 A_JumpIfCloser (700, 1)
    Goto MissileCrouch
    PRAI EEEEEEEEEE 1 A_FaceTarget (10)
    TNT1 A 0 A_Jump (20, "TacticStrafe")
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineChaingunShotCounter", 40, "RetreatReload")
    TNT1 A 0 A_GiveInventory ("DRPGMarineChaingunShotCounter", 1)
    PRAI F 2 Bright A_CustomMissile ("RLHighPowerPlasmaBallSummoned", 28, 11, frandom(1,-1), CMF_OFFSETPITCH, frandom(1,-1))
    PRAI E 1 A_MonsterRefire(30, "Overwatch")
    Goto Missile+11
  Reload:
    PRAI E 24
    TNT1 A 0 A_PlaySound("drpgmarines/plasmarifleunload", 7)
    PRAI E 9 A_FaceTarget
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_PlaySound("drpgmarines/plasmarifleload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineChaingunShotCounter", 40)
    PRAI E 24 A_FaceTarget
    Goto See
  TacticReload:
    TNT1 A 0 A_Jump(128, 3)
    PRAI E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-random(3,8))
    PRAI E 4 A_FaceTarget
    PRAI E 24
    TNT1 A 0 A_PlaySound("drpgmarines/plasmarifleunload", 7)
    PRAI E 9 A_FaceTarget
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_PlaySound("drpgmarines/plasmarifleload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineChaingunShotCounter", 40)
    PRAI E 24 A_FaceTarget
    Goto See
  TacticStrafe:
    TNT1 A 0 A_Jump(64, "TacticStrafeLeft1")
    TNT1 A 0 A_Jump(64, "TacticStrafeRight1")
    TNT1 A 0 A_Jump(32, "TacticStrafeLeft2")
    TNT1 A 0 A_Jump(32, "TacticStrafeRight2")
    TNT1 A 0 A_Jump(128, "TacticStrafeBack1")
    Goto TacticStrafeBack2
  TacticStrafeLeft1:
    TNT1 A 0 A_SetAngle(90 + angle)
    PRAI AABBCCDD 1 A_Recoil(-1)
    PRAI E 1 A_FaceTarget
    Goto Missile
  TacticStrafeLeft2:
    TNT1 A 0 A_SetAngle((90+random(-30,30)) + angle)
    PRAI AABBCCDD 1 A_Recoil(-random(1,2))
    PRAI E 1 A_FaceTarget
    Goto Missile
  TacticStrafeRight1:
    TNT1 A 0 A_SetAngle(270 + angle)
    PRAI AABBCCDD 1 A_Recoil(-1)
    PRAI E 1 A_FaceTarget
    Goto Missile
  TacticStrafeRight2:
    TNT1 A 0 A_SetAngle((270+random(-30,30)) + angle)
    PRAI AABBCCDD 1 A_Recoil(-random(1,2))
    PRAI E 1 A_FaceTarget
    Goto Missile
  TacticStrafeBack1:
    PRAI E 1 A_FaceTarget
    PRAI AABBCCDD 1 A_Recoil(-1)
    PRAI E 1 A_FaceTarget
    Goto Missile
  TacticStrafeBack2:
    PRAI E 1 A_FaceTarget
    PRAI AABBCCDD 1 A_Recoil(-random(1,2))
    PRAI E 1 A_FaceTarget
    Goto Missile
  TacticStrafeBack3:
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 ThrustThing(angle*256/360+128, 8, 0, 0)
    TNT1 A 0 ThrustThingZ(0, 4, 0, 1)
    Goto See
  Overwatch:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineChaingunShotCounter", 40, "Reload")
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    PRAI E 5 A_FaceTarget (10)
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    PRAI E 5 A_FaceTarget (10)
    TNT1 A 0 A_Jump (64, 1)
    Goto Overwatch
    TNT1 A 0
    Goto See
  MissileCrouch:
    TNT1 A 0 A_JumpIfCloser (700, "Missile")
    PRAC AAAAAAAAAA 1 A_FaceTarget (10)
    TNT1 A 0 A_Jump (20, "TacticStrafe")
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineChaingunShotCounter", 40, "ReloadCrouch")
    TNT1 A 0 A_GiveInventory ("DRPGMarineChaingunShotCounter", 1)
    PRAC F 2 Bright A_CustomMissile ("RLHighPowerPlasmaBallSummoned", 15, 8, 0)
    PRAC A 1 A_MonsterRefire(30, "Overwatch")
    Goto MissileCrouch+11
  ReloadCrouch:
    PRAC E 24
    TNT1 A 0 A_PlaySound("drpgmarines/plasmarifleunload", 7)
    PRAC E 9 A_FaceTarget
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_PlaySound("drpgmarines/plasmarifleload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineChaingunShotCounter", 40)
    PRAC E 24 A_FaceTarget
    Goto See
  OverwatchCrouch:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineChaingunShotCounter", 40, "Reload")
    TNT1 A 0 A_Chase ("", "MissileCrouch", CHF_DONTMOVE)
    PRAC E 5 A_FaceTarget (10)
    TNT1 A 0 A_Chase ("", "MissileCrouch", CHF_DONTMOVE)
    PRAC E 5 A_FaceTarget (10)
    TNT1 A 0 A_Jump (128, 1)
    Goto OverwatchCrouch
    TNT1 A 0
    Goto See
  Ambushing:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineChaingunShotCounter", 40, "Reload")
    TNT1 A 0 A_Chase ("", "MissileSpray", CHF_DONTMOVE)
    PRAC A 1 A_FaceTarget (10)
    TNT1 A 0 A_Chase ("", "MissileSpray", CHF_DONTMOVE)
    PRAC A 1 A_FaceTarget (10)
    TNT1 A 0 A_JumpIfCloser (500, "Ambushing")
    Goto See
  MissileSpray:
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineChaingunShotCounter", 40, "ReloadCrouch")
    TNT1 A 0 A_GiveInventory ("DRPGMarineChaingunShotCounter", 1)
    PRAC F 2 Bright A_CustomMissile ("RLHighPowerPlasmaBallSummoned", 15, 8, frandom(9,-9), CMF_OFFSETPITCH, frandom(3,-3))
    PRAC A 1 A_MonsterRefire(30, "Overwatch")
    Goto MissileSpray
  Pain:
    PRAI G 3
    PRAI G 3 A_Pain
    TNT1 A 0 A_JumpIfCloser (64, 1)
    Goto See
    TNT1 A 0 A_Jump(32, "TacticStrafe")
    TNT1 A 0 A_Jump(32, "TacticStrafeBack3")
    Goto See
  Death:
    PRAI H 4
    PRAI I 4 A_Scream
    PRAI J 4 A_NoBlocking
    PRAI K 4
    TNT1 A 0 A_SpawnItem ("DRPGBodyThud", 0, 0, 0, 0)
    PRAI LM 4
    PRAI N -1
    Stop
  XDeath:
    PRAI O 4
    PRAI P 4 A_XScream
    PRAI Q 4 A_NoBlocking
    TNT1 A 0 A_SpawnItem ("DRPGGibThud", 0, 0, 0, 0)
    PRAI RSTUV 4
    PRAI W -1
    Stop
  Crush:
    TNT1 A 1 A_SpawnItem("DRPGCrushedMarine",0,0,0,0)
    Stop
  }
}

ACTOR DRPGMarinePlasmaRifleSummoned3
{
  Health 300
  GibHealth -50
  Radius 20
  Height 56
  Speed 6
  PainChance 160
  DamageFactor "Crush", 10
  DamageFactor "Plasma", 0.6
  Monster
  +FLOORCLIP
  +AVOIDMELEE
  -COUNTKILL
  +AMBUSH
  +NEVERRESPAWN
  +QUICKTORETALIATE
  +NOBLOCKMONST
  +NOINFIGHTING
  +DONTHARMSPECIES
  +FRIENDLY
  -SOLID
  +ALWAYSFAST
  +QUICKTORETALIATE
  +MISSILEMORE
  +MISSILEEVENMORE
  +LOOKALLAROUND
  Obituary "%o stood in the line of fire for some reason."
  Species "Player"
  Tag "Marine"
  SeeSound "drpgmarinemale3/sight"
  PainSound "drpgmarinemale3/pain"
  DeathSound "drpgmarinemale3/death"
  ActiveSound "drpgmarinemale/active"
  AttackSound ""
  States
  {
  Spawn:
    TNT1 A 0 NoDelay ACS_NamedExecuteAlways("MonsterInit", 0, MF_NOPAYKILL | MF_NODROPS | MF_NAMEGEN | MF_RANKLOSS)
    TNT1 A 0 A_GiveInventory ("DRPGMarineSummonedToken", 1)
    PPBM E 0 A_Look
    Goto FollowPlayer
  See:    
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineChaingunShotCounter", 40, "RetreatReload")
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_JumpIfHealthLower (30, "SeeScared")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_JumpIfTargetInLOS (2, 0)
    TNT1 A 0 A_JumpIfCloser (300, "Ambushing")
    PPBM AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    Goto See
  FollowPlayer:
    PPBM AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfTargetInLOS("See")
    TNT1 A 0 A_CheckSight("CheckIfPlayerSee")
    Goto FollowPlayer
  CheckIfPlayerSee:
    TNT1 A 0
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 1)
    PPBM AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_FastChase
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    TNT1 A 0 A_JumpIfCloser(1000, 2)
    TNT1 AAA 0
    Goto FollowPlayer
  Waits:
    TNT1 A 0 A_JumpIf(GetDistance(AAPTR_TARGET) > 200, "FollowPlayer")
    PPBM E 1
    TNT1 A 0 A_ClearTarget
    TNT1 A 0 A_Jump(32, "Waits2")
    TNT1 A 0 A_Jump(32, "Waits3")
    TNT1 A 0 A_Jump(32, "See")
    PPBM EEE 4 A_Stop
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PPBM EEE 4 A_Stop
    TNT1 AAA 0 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PPBM E 0 A_Look
    PPBM E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits2:
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PPBM EEE 6 A_Stop
    PPBM EEE 6 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PPBM A 0 A_Look
    PPBM E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits3:
    TNT1 A 0
    TNT1 AAA 0
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PPBM EEE 4 A_Stop
    PPBM EEE 4 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PPBM A 0 A_Look
    PPBM E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  SeeScared:
    TNT1 A 0 A_JumpIfHealthLower (30, 1)
    Goto See
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 1)
    PPBM AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PPBM AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PPBM AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PPBM AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PPBM AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PPBM AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PPBM AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PPBM AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, "SeeScared")
    Goto Overwatch
  RetreatReload:
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 1)
    TNT1 A 0 A_JumpIf(GetDistance(AAPTR_TARGET) > 64, "TacticReload")
    PPBM E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PPBM AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (128, 2)
    TNT1 A 0 A_Jump (32, "Reload")
    PPBM E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PPBM AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (96, 2)
    TNT1 A 0 A_Jump (64, "Reload")
    PPBM E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PPBM AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (64, 2)
    TNT1 A 0 A_Jump (96, "Reload")
    PPBM E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-1)
    PPBM AAAAABBBBBCCCCCDDDDD 1 A_Chase ("", "")
    TNT1 A 0 A_JumpIfCloser (32, 2)
    TNT1 A 0 A_Jump (128, "Reload")
    TNT1 A 0
    Goto RetreatReload+1
  Missile:
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    TNT1 A 0 A_JumpIfCloser (700, 1)
    Goto MissileCrouch
    PPBM EEEEEEEEEE 1 A_FaceTarget (10)
    PPBM EEEE 1 A_FaceTarget
    TNT1 A 0 A_Jump (20, "TacticStrafe")
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineChaingunShotCounter", 40, "RetreatReload")
    TNT1 A 0 A_GiveInventory ("DRPGMarineChaingunShotCounter", 1)
    PPBM F 2 Bright A_CustomMissile ("RLPlasmaBallMkIISummoned", 28, 11, frandom(1,-1), CMF_OFFSETPITCH, frandom(1,-1))
    PPBM E 1 A_MonsterRefire(30, "Overwatch")
    Goto Missile+11
  Reload:
    PPBM E 24
    TNT1 A 0 A_PlaySound("drpgmarines/plasmarifleunload", 7)
    PPBM E 9 A_FaceTarget
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_PlaySound("drpgmarines/plasmarifleload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineChaingunShotCounter", 40)
    PPBM E 24 A_FaceTarget
    Goto See
  TacticReload:
    TNT1 A 0 A_Jump(128, 3)
    PPBM E 1 A_FaceTarget (0, 90, random(90, 270), 0, 0)
    TNT1 A 0 A_Recoil(-random(3,8))
    PPBM E 4 A_FaceTarget
    PPBM E 24
    TNT1 A 0 A_PlaySound("drpgmarines/plasmarifleunload", 7)
    PPBM E 9 A_FaceTarget
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_PlaySound("drpgmarines/plasmarifleload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineChaingunShotCounter", 40)
    PPBM E 24 A_FaceTarget
    Goto See
  TacticStrafe:
    TNT1 A 0 A_Jump(64, "TacticStrafeLeft1")
    TNT1 A 0 A_Jump(64, "TacticStrafeRight1")
    TNT1 A 0 A_Jump(32, "TacticStrafeLeft2")
    TNT1 A 0 A_Jump(32, "TacticStrafeRight2")
    TNT1 A 0 A_Jump(128, "TacticStrafeBack1")
    Goto TacticStrafeBack2
  TacticStrafeLeft1:
    TNT1 A 0 A_SetAngle(90 + angle)
    PPBM AABBCCDD 1 A_Recoil(-1)
    PPBM E 1 A_FaceTarget
    Goto Missile
  TacticStrafeLeft2:
    TNT1 A 0 A_SetAngle((90+random(-30,30)) + angle)
    PPBM AABBCCDD 1 A_Recoil(-random(1,2))
    PPBM E 1 A_FaceTarget
    Goto Missile
  TacticStrafeRight1:
    TNT1 A 0 A_SetAngle(270 + angle)
    PPBM AABBCCDD 1 A_Recoil(-1)
    PPBM E 1 A_FaceTarget
    Goto Missile
  TacticStrafeRight2:
    TNT1 A 0 A_SetAngle((270+random(-30,30)) + angle)
    PPBM AABBCCDD 1 A_Recoil(-random(1,2))
    PPBM E 1 A_FaceTarget
    Goto Missile
  TacticStrafeBack1:
    PPBM E 1 A_FaceTarget
    PPBM AABBCCDD 1 A_Recoil(-1)
    PPBM E 1 A_FaceTarget
    Goto Missile
  TacticStrafeBack2:
    PPBM E 1 A_FaceTarget
    PPBM AABBCCDD 1 A_Recoil(-random(1,2))
    PPBM E 1 A_FaceTarget
    Goto Missile
  TacticStrafeBack3:
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 ThrustThing(angle*256/360+128, 8, 0, 0)
    TNT1 A 0 ThrustThingZ(0, 4, 0, 1)
    Goto See
  Overwatch:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineChaingunShotCounter", 40, "Reload")
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    PPBM E 5 A_FaceTarget (10)
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    PPBM E 5 A_FaceTarget (10)
    TNT1 A 0 A_Jump (64, 1)
    Goto Overwatch
    TNT1 A 0
    Goto See
  MissileCrouch:
    TNT1 A 0 A_JumpIfCloser (700, "Missile")
    PPBC AAAAAAAAAA 1 A_FaceTarget (10)
    PPBC AAAA 1 A_FaceTarget
    TNT1 A 0 A_Jump (20, "TacticStrafe")
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineChaingunShotCounter", 40, "ReloadCrouch")
    TNT1 A 0 A_GiveInventory ("DRPGMarineChaingunShotCounter", 1)
    PPBC F 2 Bright A_CustomMissile ("RLPlasmaBallMkIISummoned", 15, 8, 0)
    PPBC A 1 A_MonsterRefire(30, "Overwatch")
    Goto MissileCrouch+11
  ReloadCrouch:
    PPBC E 24
    TNT1 A 0 A_PlaySound("drpgmarines/plasmarifleunload", 7)
    PPBC E 9 A_FaceTarget
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_PlaySound("drpgmarines/plasmarifleload", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineChaingunShotCounter", 40)
    PPBC E 24 A_FaceTarget
    Goto See
  OverwatchCrouch:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineChaingunShotCounter", 40, "Reload")
    TNT1 A 0 A_Chase ("", "MissileCrouch", CHF_DONTMOVE)
    PPBC E 5 A_FaceTarget (10)
    TNT1 A 0 A_Chase ("", "MissileCrouch", CHF_DONTMOVE)
    PPBC E 5 A_FaceTarget (10)
    TNT1 A 0 A_Jump (128, 1)
    Goto OverwatchCrouch
    TNT1 A 0
    Goto See
  Ambushing:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineChaingunShotCounter", 40, "Reload")
    TNT1 A 0 A_Chase ("", "MissileSpray", CHF_DONTMOVE)
    PPBC A 1 A_FaceTarget (10)
    TNT1 A 0 A_Chase ("", "MissileSpray", CHF_DONTMOVE)
    PPBC A 1 A_FaceTarget (10)
    TNT1 A 0 A_JumpIfCloser (500, "Ambushing")
    Goto See
  MissileSpray:
    TNT1 A 0 A_FaceTarget
    PPBC AAA 1 A_FaceTarget
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineChaingunShotCounter", 40, "ReloadCrouch")
    TNT1 A 0 A_GiveInventory ("DRPGMarineChaingunShotCounter", 1)
    PPBC F 2 Bright A_CustomMissile ("RLPlasmaBallMkIISummoned", 15, 8, frandom(9,-9), CMF_OFFSETPITCH, frandom(3,-3))
    PPBC A 1 A_MonsterRefire(30, "Overwatch")
    Goto MissileSpray
  Pain:
    PPBM G 3
    PPBM G 3 A_Pain
    TNT1 A 0 A_JumpIfCloser (64, 1)
    Goto See
    TNT1 A 0 A_Jump(32, "TacticStrafe")
    TNT1 A 0 A_Jump(32, "TacticStrafeBack3")
    Goto See
  Death:
    PPBM H 4
    PPBM I 4 A_Scream
    PPBM J 4 A_NoBlocking
    PPBM K 4
    TNT1 A 0 A_SpawnItem ("DRPGBodyThud", 0, 0, 0, 0)
    PPBM LM 4
    PPBM N -1
    Stop
  XDeath:
    PPBM O 4
    PPBM P 4 A_XScream
    PPBM Q 4 A_NoBlocking
    TNT1 A 0 A_SpawnItem ("DRPGGibThud", 0, 0, 0, 0)
    PPBM RSTUV 4
    PPBM W -1
    Stop
  Crush:
    TNT1 A 1 A_SpawnItem("DRPGCrushedMarine",0,0,0,0)
    Stop
  }
}

ACTOR DRPGMarineBFG9000Summoned2
{
  Health 275
  GibHealth -50
  Radius 20
  Height 56
  Speed 5
  PainChance 192
  DamageFactor "Crush", 10
  Monster
  +FLOORCLIP
  +AVOIDMELEE
  -COUNTKILL
  +AMBUSH
  +NEVERRESPAWN
  +QUICKTORETALIATE
  +NOBLOCKMONST
  +NOINFIGHTING
  +DONTHARMSPECIES
  +FRIENDLY
  -SOLID
  +ALWAYSFAST
  +QUICKTORETALIATE
  +MISSILEMORE
  +MISSILEEVENMORE
  +LOOKALLAROUND
  Obituary "%o stood in the line of fire for some reason."
  Species "Player"
  Tag "Marine"
  SeeSound "drpgmarinemale2/sight"
  PainSound "drpgmarinemale2/pain"
  DeathSound "drpgmarinemale2/death"
  ActiveSound "drpgmarinemale/active"
  AttackSound ""
  States
  {
  Spawn:
    TNT1 A 0 NoDelay ACS_NamedExecuteAlways("MonsterInit", 0, MF_NOPAYKILL | MF_NODROPS | MF_NAMEGEN | MF_RANKLOSS)
    TNT1 A 0 A_GiveInventory ("DRPGMarineSummonedToken", 1)
    PB10 A 0 A_Look
    Goto FollowPlayer
  See:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineBFG9000ShotCounter", 2, "Reload")
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_JumpIfHealthLower (30, "SeeScared")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    TNT1 A 0 A_CheckSight("FollowPlayer")
    PB10 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    Goto See
  FollowPlayer:
    PB10 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfTargetInLOS("See")
    TNT1 A 0 A_CheckSight("CheckIfPlayerSee")
    Goto FollowPlayer
  CheckIfPlayerSee:
    TNT1 A 0
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 1)
    PB10 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_FastChase
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    TNT1 A 0 A_JumpIfCloser(1000, 2)
    TNT1 AAA 0
    Goto FollowPlayer
  Waits:
    TNT1 A 0 A_JumpIf(GetDistance(AAPTR_TARGET) > 200, "FollowPlayer")
    PB10 E 1
    TNT1 A 0 A_ClearTarget
    TNT1 A 0 A_Jump(32, "Waits2")
    TNT1 A 0 A_Jump(32, "Waits3")
    TNT1 A 0 A_Jump(32, "See")
    PB10 EEE 4 A_Stop
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PB10 EEE 4 A_Stop
    TNT1 AAA 0 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PB10 E 0 A_Look
    PB10 E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits2:
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PB10 EEE 6 A_Stop
    PB10 EEE 6 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PB10 A 0 A_Look
    PB10 E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits3:
    TNT1 A 0
    TNT1 AAA 0
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PB10 EEE 4 A_Stop
    PB10 EEE 4 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PB10 A 0 A_Look
    PB10 E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  SeeScared:
    TNT1 A 0 A_JumpIfHealthLower (30, 1)
    Goto See
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 1)
    PB10 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PB10 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PB10 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PB10 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PB10 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PB10 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PB10 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PB10 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, "SeeScared")
    Goto Overwatch
  Missile:
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    TNT1 A 0 A_Jump (64, "TacticStrafe")
    TNT1 A 0 A_Jump (128, "TacticStrafeLeft1")
    TNT1 A 0 A_Jump (128, "TacticStrafeRight1")
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineBFG9000ShotCounter", 2, "Reload")
    TNT1 A 0 A_PlaySound("weapons/vbfg9000charge", CHAN_WEAPON)
    PB10 EEEEEEEEEEEEEEEEEEEE 1 A_FaceTarget (10)
    PB10 FFFFFFFFFF 1 Bright A_FaceTarget
    TNT1 A 0 A_GiveInventory ("DRPGMarineBFG9000ShotCounter", 1)
    PB10 F 7 Bright A_CustomMissile ("RLVBFGBallSummoned", 40, 11, frandom(1,-1), CMF_OFFSETPITCH, frandom(1,-1))
    PB10 E 23
    Goto See
  Overwatch:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineBFG9000ShotCounter", 2, "Reload")
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    PB10 E 4 A_FaceTarget
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    PB10 E 4 A_FaceTarget
    TNT1 A 0 A_Jump (32, 1)
    Goto Overwatch
    TNT1 A 0
    Goto See
  Reload:
    PB10 E 40
    TNT1 A 0 A_PlaySound("weapons/vbfg9000unload", 7)
    PB10 E 35
    TNT1 A 0 A_PlaySound("weapons/vbfg9000load", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineBFG9000ShotCounter", 2)
    PB10 E 27
    Goto See
  TacticStrafe:
    TNT1 A 0 A_Jump(64, "TacticStrafeLeft1")
    TNT1 A 0 A_Jump(64, "TacticStrafeRight1")
    TNT1 A 0 A_Jump(32, "TacticStrafeLeft2")
    TNT1 A 0 A_Jump(32, "TacticStrafeRight2")
    TNT1 A 0 A_Jump(128, "TacticStrafeBack1")
    Goto TacticStrafeBack2
  TacticStrafeLeft1:
    TNT1 A 0 A_SetAngle(90 + angle)
    PB10 AABBCCDD 1 A_Recoil(-1)
    PB10 E 1 A_FaceTarget
    Goto Missile+3
  TacticStrafeLeft2:
    TNT1 A 0 A_SetAngle((90+random(-30,30)) + angle)
    PB10 AABBCCDD 1 A_Recoil(-random(1,2))
    PB10 E 1 A_FaceTarget
    Goto Missile+3
  TacticStrafeRight1:
    TNT1 A 0 A_SetAngle(270 + angle)
    PB10 AABBCCDD 1 A_Recoil(-1)
    PB10 E 1 A_FaceTarget
    Goto Missile+3
  TacticStrafeRight2:
    TNT1 A 0 A_SetAngle((270+random(-30,30)) + angle)
    PB10 AABBCCDD 1 A_Recoil(-random(1,2))
    PB10 E 1 A_FaceTarget
    Goto Missile+3
  TacticStrafeBack1:
    PB10 E 1 A_FaceTarget
    PB10 AABBCCDD 1 A_Recoil(-1)
    PB10 E 1 A_FaceTarget
    Goto Missile+3
  TacticStrafeBack2:
    PB10 E 1 A_FaceTarget
    PB10 AABBCCDD 1 A_Recoil(-random(1,2))
    PB10 E 1 A_FaceTarget
    Goto Missile+3
  TacticStrafeBack3:
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 ThrustThing(angle*256/360+128, 8, 0, 0)
    TNT1 A 0 ThrustThingZ(0, 4, 0, 1)
    Goto See
  Pain:
    PB10 G 3
    PB10 G 3 A_Pain
    TNT1 A 0 A_JumpIfCloser (64, 1)
    Goto See
    TNT1 A 0 A_Jump(32, "TacticStrafe")
    TNT1 A 0 A_Jump(32, "TacticStrafeBack3")
    Goto See
  Death:
    PB10 H 4
    TNT1 A 0 A_PlaySound("drpgmarines/smallexp", CHAN_WEAPON)
    PB10 I 4 A_Scream
    PB10 J 4 A_NoBlocking
    PB10 K 4
    TNT1 A 0 A_SpawnItem ("DRPGBodyThud", 0, 0, 0, 0)
    PB10 LM 4
    PB10 N -1
    Stop
  XDeath:
    TNT1 A 0 A_PlaySound("drpgmarines/smallexp", CHAN_WEAPON)
    PB10 O 4
    PB10 P 4 A_XScream
    PB10 Q 4 A_NoBlocking
    TNT1 A 0 A_SpawnItem ("DRPGGibThud", 0, 0, 0, 0)
    PB10 RSTUV 4
    PB10 W -1
    Stop
  Crush:
    TNT1 A 1 A_SpawnItem("DRPGCrushedMarine",0,0,0,0)
    Stop
  }
}

ACTOR DRPGMarineBFG9000Summoned3
{
  Health 300
  GibHealth -50
  Radius 20
  Height 56
  Speed 5
  PainChance 160
  DamageFactor "Crush", 10
  Monster
  +FLOORCLIP
  +AVOIDMELEE
  -COUNTKILL
  +AMBUSH
  +NEVERRESPAWN
  +QUICKTORETALIATE
  +NOBLOCKMONST
  +NOINFIGHTING
  +DONTHARMSPECIES
  +FRIENDLY
  -SOLID
  +ALWAYSFAST
  +QUICKTORETALIATE
  +MISSILEMORE
  +MISSILEEVENMORE
  +LOOKALLAROUND
  Obituary "%o stood in the line of fire for some reason."
  Species "Player"
  Tag "Marine"
  SeeSound "drpgmarinemale2/sight"
  PainSound "drpgmarinemale2/pain"
  DeathSound "drpgmarinemale2/death"
  ActiveSound "drpgmarinemale/active"
  AttackSound ""
  States
  {
  Spawn:
    TNT1 A 0 NoDelay ACS_NamedExecuteAlways("MonsterInit", 0, MF_NOPAYKILL | MF_NODROPS | MF_NAMEGEN | MF_RANKLOSS)
    TNT1 A 0 A_GiveInventory ("DRPGMarineSummonedToken", 1)
    PB10 A 0 A_Look
    Goto FollowPlayer
  See:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineBFG9000ShotCounter", 2, "Reload")
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_JumpIfHealthLower (30, "SeeScared")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    TNT1 A 0 A_CheckSight("FollowPlayer")
    PB10 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    Goto See
  FollowPlayer:
    PB10 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfTargetInLOS("See")
    TNT1 A 0 A_CheckSight("CheckIfPlayerSee")
    Goto FollowPlayer
  CheckIfPlayerSee:
    TNT1 A 0
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 1)
    PB10 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_FastChase
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    TNT1 A 0 A_JumpIfCloser(1000, 2)
    TNT1 AAA 0
    Goto FollowPlayer
  Waits:
    TNT1 A 0 A_JumpIf(GetDistance(AAPTR_TARGET) > 200, "FollowPlayer")
    PB10 E 1
    TNT1 A 0 A_ClearTarget
    TNT1 A 0 A_Jump(32, "Waits2")
    TNT1 A 0 A_Jump(32, "Waits3")
    TNT1 A 0 A_Jump(32, "See")
    PB10 EEE 4 A_Stop
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PB10 EEE 4 A_Stop
    TNT1 AAA 0 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PB10 E 0 A_Look
    PB10 E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits2:
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PB10 EEE 6 A_Stop
    PB10 EEE 6 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PB10 A 0 A_Look
    PB10 E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  Waits3:
    TNT1 A 0
    TNT1 AAA 0
    TNT1 A 0 A_SetAngle(random(90, -90) + angle)
    PB10 EEE 4 A_Stop
    PB10 EEE 4 A_Stop
    TNT1 A 0 A_CheckSight("FollowPlayer")
    TNT1 A 0 A_ClearTarget
    PB10 A 0 A_Look
    PB10 E 1 A_LookEx(0, 0, 0, 0, 0, "FollowPlayer")
    TNT1 A 0 A_CheckSIght("FollowPlayer")
    TNT1 A 0 A_CheckFlag("FRIENDLY", "Waits", AAPTR_TARGET)
    Goto FollowPlayer
  SeeScared:
    TNT1 A 0 A_JumpIfHealthLower (30, 1)
    Goto See
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 1)
    PB10 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PB10 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PB10 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PB10 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PB10 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PB10 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PB10 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, 1)
    Goto Overwatch
    PB10 AAAAABBBBBCCCCCDDDDD 1 A_Chase
    TNT1 A 0 A_Recoil(-1)
    TNT1 A 0 A_JumpIfCloser (1024, "SeeScared")
    Goto Overwatch
  Missile:
    TNT1 A 0 A_ChangeFlag ("THRUACTORS", 0)
    TNT1 A 0 A_Jump (64, "TacticStrafe")
    TNT1 A 0 A_Jump (128, "TacticStrafeLeft1")
    TNT1 A 0 A_Jump (128, "TacticStrafeRight1")
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineBFG9000ShotCounter", 2, "Reload")
    TNT1 A 0 A_PlaySound("weapons/vbfg9000charge", CHAN_WEAPON)
    PB10 EEEEEEEEEEEEEEEEEEEE 1 A_FaceTarget (10)
    PB10 FFFFFFFFFF 1 Bright A_FaceTarget
    TNT1 A 0 A_GiveInventory ("DRPGMarineBFG9000ShotCounter", 1)
    PB10 F 7 Bright A_CustomMissile ("RLBiggestFuckingGunBallSummoned", 40, 11, frandom(1,-1), CMF_OFFSETPITCH, frandom(1,-1))
    PB10 E 23
    Goto See
  Overwatch:
    TNT1 A 0 A_JumpIfInventory ("DRPGMarineBFG9000ShotCounter", 2, "Reload")
    TNT1 A 0 A_ChangeFlag ("FRIGHTENED", 0)
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    PB10 E 4 A_FaceTarget
    TNT1 A 0 A_Chase ("", "Missile", CHF_DONTMOVE)
    PB10 E 4 A_FaceTarget
    TNT1 A 0 A_Jump (32, 1)
    Goto Overwatch
    TNT1 A 0
    Goto See
  Reload:
    PB10 E 40
    TNT1 A 0 A_PlaySound("weapons/vbfg9000unload", 7)
    PB10 E 35
    TNT1 A 0 A_PlaySound("weapons/vbfg9000load", 7)
    TNT1 A 0 A_TakeInventory ("DRPGMarineBFG9000ShotCounter", 2)
    PB10 E 27
    Goto See
  TacticStrafe:
    TNT1 A 0 A_Jump(64, "TacticStrafeLeft1")
    TNT1 A 0 A_Jump(64, "TacticStrafeRight1")
    TNT1 A 0 A_Jump(32, "TacticStrafeLeft2")
    TNT1 A 0 A_Jump(32, "TacticStrafeRight2")
    TNT1 A 0 A_Jump(128, "TacticStrafeBack1")
    Goto TacticStrafeBack2
  TacticStrafeLeft1:
    TNT1 A 0 A_SetAngle(90 + angle)
    PB10 AABBCCDD 1 A_Recoil(-1)
    PB10 E 1 A_FaceTarget
    Goto Missile+3
  TacticStrafeLeft2:
    TNT1 A 0 A_SetAngle((90+random(-30,30)) + angle)
    PB10 AABBCCDD 1 A_Recoil(-random(1,2))
    PB10 E 1 A_FaceTarget
    Goto Missile+3
  TacticStrafeRight1:
    TNT1 A 0 A_SetAngle(270 + angle)
    PB10 AABBCCDD 1 A_Recoil(-1)
    PB10 E 1 A_FaceTarget
    Goto Missile+3
  TacticStrafeRight2:
    TNT1 A 0 A_SetAngle((270+random(-30,30)) + angle)
    PB10 AABBCCDD 1 A_Recoil(-random(1,2))
    PB10 E 1 A_FaceTarget
    Goto Missile+3
  TacticStrafeBack1:
    PB10 E 1 A_FaceTarget
    PB10 AABBCCDD 1 A_Recoil(-1)
    PB10 E 1 A_FaceTarget
    Goto Missile+3
  TacticStrafeBack2:
    PB10 E 1 A_FaceTarget
    PB10 AABBCCDD 1 A_Recoil(-random(1,2))
    PB10 E 1 A_FaceTarget
    Goto Missile+3
  TacticStrafeBack3:
    TNT1 A 0 A_FaceTarget
    TNT1 A 0 ThrustThing(angle*256/360+128, 8, 0, 0)
    TNT1 A 0 ThrustThingZ(0, 4, 0, 1)
    Goto See
  Pain:
    PB10 G 3
    PB10 G 3 A_Pain
    TNT1 A 0 A_JumpIfCloser (64, 1)
    Goto See
    TNT1 A 0 A_Jump(32, "TacticStrafe")
    TNT1 A 0 A_Jump(32, "TacticStrafeBack3")
    Goto See
  Death:
    PB10 H 4
    TNT1 A 0 A_PlaySound("drpgmarines/smallexp", CHAN_WEAPON)
    PB10 I 4 A_Scream
    PB10 J 4 A_NoBlocking
    PB10 K 4
    TNT1 A 0 A_SpawnItem ("DRPGBodyThud", 0, 0, 0, 0)
    PB10 LM 4
    PB10 N -1
    Stop
  XDeath:
    TNT1 A 0 A_PlaySound("drpgmarines/smallexp", CHAN_WEAPON)
    PB10 O 4
    PB10 P 4 A_XScream
    PB10 Q 4 A_NoBlocking
    TNT1 A 0 A_SpawnItem ("DRPGGibThud", 0, 0, 0, 0)
    PB10 RSTUV 4
    PB10 W -1
    Stop
  Crush:
    TNT1 A 1 A_SpawnItem("DRPGCrushedMarine",0,0,0,0)
    Stop
  }
}

/////Replacers//////

ACTOR RLMissileSummoned : RLMissile
{
   +MTHRUSPECIES
}

ACTOR RLClusterBombSummoned : RLClusterBomb
{
   +MTHRUSPECIES
}

ACTOR RLHighPowerPlasmaBallSummoned : RLHighPowerPlasmaBall
{
   +MTHRUSPECIES
}

ACTOR RLPlasmaBallMkIISummoned : RLPlasmaBallMkII
{
   +MTHRUSPECIES
}

ACTOR RLVBFGBallSummoned : BFGBall
{
	Radius 14
	Height 9
	Alpha 0.95
	Scale 0.8
	Decal "BigBFGLightning"
	Damagetype "Plasma"
	Species "Player"
    +MTHRUSPECIES
	+THRUSPECIES
	+THRUGHOST
	+DONTREFLECT
	+FORCEXYBILLBOARD
	SeeSound "weapons/vbfg9000fire"
	DeathSound ""
	States
	{
		Spawn:
			VBAL A 0 NoDelay A_JumpIf(CallACS("DRLA_Fancyprojectiles") == 1, "Spawn.Fancy")
		Spawn.Normal:
			VBAL ABCD 2 Bright
			Loop
		Spawn.Fancy:
			VBAL ABCD 2 Bright A_SpawnItemEx("RLVBFGBallTrail",-5)
			Loop
		Death:
			TNT1 A 0 A_JumpIf(CallACS("DRLA_QuakeNShake") == 0, 3)
			TNT1 A 0 A_Quake (1, 8, 0, 1720, "")
			TNT1 A 0 A_Quake (5, 8, 0, 768, "")
			TNT1 A 0 A_PlaySound ("weapons/vbfg9000hit", 7, 1, 0, 0.3)
			TNT1 A 0 A_PlaySound("weapons/vbfg9000hit", CHAN_ITEM, 0.05, 0, 0.05)
			TNT1 A 0 A_SetScale (1.5)
		Death.Normal:
			TNT1 A 0 A_JumpIf(CallACS("DRLA_FancyProjectiles") == 1, "Death.Fancy")
			BFE1 AB 8 Bright
			BFE1 C 8 Bright A_BFGSpray ("BFGExtra", 60, 20, 90, 1024, 32, 0)
			BFE1 DEF 8 Bright
			Stop
		Death.Fancy:
			BFE1 A 0 A_SpawnItemEx("RLVBFGPuff")
			BFE1 AB 8 Bright
			BFE1 C 8 Bright A_BFGSpray ("BFGExtra", 60, 20, 90, 1024, 32, 0)
			BFE1 DEF 8 Bright
			Stop
	}
}

ACTOR RLBiggestFuckingGunBallSummoned : BFGBall
{
	Radius 14
	Height 9
	Alpha 0.95
	Scale 0.8
	Damagetype "Plasma"
	Species "Player"
    +MTHRUSPECIES
	+THRUSPECIES
	+RIPPER
	+FULLVOLDEATH
	+NOBOSSRIP
	+SKYEXPLODE
	+FORCEPAIN
	+FORCERADIUSDMG
	+THRUGHOST
	+DONTREFLECT
	Decal "BiggestBFGLightning"
	Translation "192:207=112:127"
	SeeSound "weapons/biggestfuckinggunfire"
	DeathSound ""
	States
	{
		Spawn:
			TNT1 A 0
			TNT1 A 0 A_PlaySound("weapons/biggestfuckinggunball", 5, 1, 1, 0.5)
			PULS CDEFGFED 2 Bright A_CustomMissile("RLBiggestFuckingGunBallTrail", 8, 0, 0)
			Loop
		Death:
			TNT1 A 0 A_JumpIf(CallACS("DRLA_QuakeNShake") == 0, 3)
			TNT1 A 0 A_Quake (1, 48, 0, 5000, "")
			TNT1 A 0 A_Quake (6, 32, 0, 2500, "")
			TNT1 A 0 A_Quake (9, 24, 0, 1000, "")
			TNT1 A 0 A_PlaySound ("weapons/biggestfuckinggunhit", 7, 1, 0, 0.1)
			TNT1 A 0 A_PlaySound("weapons/biggestfuckinggunhit", CHAN_ITEM, 0.05, 0, 0.05)
			TNT1 A 0 A_StopSound(5)
			TNT1 A 0 A_SetScale (2)
			TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_CustomMissile("RLBiggestFuckingGunSpark", 16, 0, random (0,360))
			PULS HI 4 Bright
			PULS J 4 Bright A_BFGSpray ("RLBFGExtraSummoned", 80, 25, 90, 1024, 32, 0)
			PULS KLMNOPQRST 4 Bright
			Stop
	}
}

ACTOR RLBFGExtraSummoned : BFGExtra
{
  +PUFFGETSOWNER
  +THRUGHOST
  +MTHRUSPECIES
  +THRUSPECIES
  Species "Player"
  Damagetype "Plasma"
  States
  {
  Spawn:
    TNT1 A 0
    TNT1 A 0 A_PlaySound("weapons/bfgx", CHAN_BODY, 1, 0, 0.9)
    BFE1 AB 8 Bright
    BFE1 C 8 Bright
    BFE1 DEF 8 Bright
    Stop
  }
}

//////Counters/////

Actor DRPGMarineCombatPistolShotCounter : Inventory
{
    inventory.maxamount 12
}

Actor DRPGMarineBattleRifleMk2ShotCounter : Inventory
{
    inventory.maxamount 30
}

Actor DRPGMarineVanguardRifleShotCounter : Inventory
{
    inventory.maxamount 60
}

Actor DRPGMarineCombatShotgunShotCounter : Inventory
{
    inventory.maxamount 5
}

Actor DRPGMarineCombatShotgunMk2ShotCounter : Inventory
{
    inventory.maxamount 8
}

Actor DRPGMarineQuadShotgunShotCounter : Inventory
{
    inventory.maxamount 2
}

Actor DRPGMarineQuadShotgunMk2ShotCounter : Inventory
{
    inventory.maxamount 4
}

Actor DRPGMarineMinigunShotCounter : Inventory
{
    inventory.maxamount 200
}

Actor DRPGMarinePlasmaRifleMk2ShotCounter : Inventory
{
    inventory.maxamount 60
}